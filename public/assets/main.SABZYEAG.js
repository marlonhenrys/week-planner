//__HEAD__
function Us(n,t){Object.defineProperty(n,"name",{value:t,configurable:!0})}var ce=Symbol.for("#__listeners__");var ir=class{static for(t){return new Proxy({},new this(t))}constructor(t){this.getter=t}get target(){return this.getter()}get(t,e){return this.target[e]}set(t,e,i){return this.target[e]=i,!0}},er=ir;(()=>{Us(ir,"LazyProxy")})();function zs(n,t={}){return new Proxy(t,new er(n))}function fe(n){let t=typeof n;if(t=="number")return n;if(t=="string"){if(/^\d+fps$/.test(n))return 1e3/parseFloat(n);if(/^([-+]?[\d\.]+)s$/.test(n))return parseFloat(n)*1e3;if(/^([-+]?[\d\.]+)ms$/.test(n))return parseFloat(n)}return null}function Qe(n,t,e){if(!n)return;let i=Object.getOwnPropertyDescriptor(n,t);return i||n==e?i||void 0:Qe(Reflect.getPrototypeOf(n),t,e)}var Ws=function(n,t,e){let i,r,s;for(;(i=e)&&(e=e.next);)(r=e.listener)&&(e.path&&r[e.path]?s=t?r[e.path].apply(r,t):r[e.path]():s=t?r.apply(e,t):r.call(e)),e.times&&--e.times<=0&&(i.next=e.next,e.listener=null)};function bt(n,t,e,i){let r,s,o;return r=n[ce]||(n[ce]={}),s=r[t]||(r[t]={}),o=s.tail||(s.tail=s.next={}),o.listener=e,o.path=i,s.tail=o.next={},o}function G(n,t,e){let i=bt(n,t,e);return i.times=1,i}function Mt(n,t,e,i){if(!e)return;let r,s,o=n[ce];if(!!o&&(r=o[t])){for(;(s=r)&&(r=r.next);)if(r==e||r.listener==e){s.next=r.next,r.listener=null;break}}}function ht(n,t,e){let i;(i=n[ce])&&(i[t]&&Ws(t,e,i[t]),i.all&&Ws(t,[t,e],i.all))}var rr=class{emit(t,...e){return ht(this,t,e)}on(t,...e){return bt(this,t,...e)}once(t,...e){return G(this,t,...e)}un(t,...e){return Mt(this,t,...e)}},Hs=rr;(()=>{Us(rr,"Emitter")})();function Qs(n,t){Object.defineProperty(n,"name",{value:t,configurable:!0})}function Oh(n){let t;return n&&((t=n.toIterable)?t.call(n):n)}var Ys=Symbol.for("#__init__"),Nh=Symbol.for("#__patch__");var Xs=Symbol.for("#schedule"),nr=Symbol.for("#frames"),Je=Symbol.for("#interval"),qt=Symbol.for("#stage"),Wt=Symbol.for("#scheduled"),Ze=Symbol.for("#version"),kh=Symbol.for("#fps"),Gs=Symbol.for("#ticker"),Eh=globalThis.requestAnimationFrame||function(n){return globalThis.setTimeout(n,1e3/60)};var Rd=1/60,lr=class{[Nh](t={},e=!0){var i;(i=t.owner)!==void 0&&(this.owner=i),(i=t.target)!==void 0&&(this.target=i),(i=t.active)!==void 0&&(this.active=i),(i=t.value)!==void 0&&(this.value=i),(i=t.skip)!==void 0&&(this.skip=i),(i=t.last)!==void 0&&(this.last=i)}constructor(t=null){this[Ys](t)}[Ys](t=null,e=!0,i=!0){var r;this.owner=t&&(r=t.owner)!==void 0?r:null,this.target=t&&(r=t.target)!==void 0?r:null,this.active=t&&(r=t.active)!==void 0?r:!1,this.value=t&&(r=t.value)!==void 0?r:void 0,this.skip=t&&(r=t.skip)!==void 0?r:0,this.last=t&&(r=t.last)!==void 0?r:0}tick(t,e){return this.last=this.owner[nr],this.target.tick(this,e),1}update(t,e){let i=this.active,r=t.value;return this.value!=r&&(this.deactivate(),this.value=r),(this.value||i||e)&&this.activate(),this}queue(){this.owner.add(this)}activate(){return this.value===!0?this.owner.on("commit",this):this.value===!1||typeof this.value=="number"&&(this.value/16.666666666666668<=2?this.owner.on("raf",this):this[Je]=globalThis.setInterval(this.queue.bind(this),this.value)),this.active=!0,this}deactivate(){return this.value===!0&&this.owner.un("commit",this),this.owner.un("raf",this),this[Je]&&(globalThis.clearInterval(this[Je]),this[Je]=null),this.active=!1,this}},sr=lr;(()=>{Qs(lr,"Scheduled")})();var ur=class{constructor(){var t=this;this.id=Symbol(),this.queue=[],this.stage=-1,this[qt]=-1,this[nr]=0,this[Wt]=!1,this[Ze]=0,this.listeners={},this.intervals={},this.commit=function(){return t.add("commit"),t},this[kh]=0,this.$promise=null,this.$resolve=null,this[Gs]=function(e){return t[Wt]=!1,t.tick(e)}}touch(){return this[Ze]++}get version(){return this[Ze]}add(t,e){return(e||this.queue.indexOf(t)==-1)&&this.queue.push(t),this[Wt]||this[Xs](),this}get committingΦ(){return this.queue.indexOf("commit")>=0}get syncingΦ(){return this[qt]==1}listen(t,e){let i=this.listeners[t],r=!i;return i||(i=this.listeners[t]=new Set),i.add(e),t=="raf"&&r&&this.add("raf"),this}unlisten(t,e){var i;let r=this.listeners[t];return r&&r.delete(e),t=="raf"&&r&&r.size==0&&(i=this.listeners.raf,delete this.listeners.raf),this}on(t,e){return this.listen(t,e)}un(t,e){return this.unlisten(t,e)}get promise(){var t=this;return this.$promise||(this.$promise=new Promise(function(e){return t.$resolve=e}))}tick(t){var e=this;let i=this.queue,r=this[nr]++;if(this.ts||(this.ts=t),this.dt=t-this.ts,this.ts=t,this.queue=[],this[qt]=1,this[Ze]++,i.length)for(let s=0,o=Oh(i),l=o.length;s<l;s++){let u=o[s];typeof u=="string"&&this.listeners[u]?this.listeners[u].forEach(function(a){if(a.tick instanceof Function)return a.tick(e,u);if(a instanceof Function)return a(e,u)}):u instanceof Function?u(this.dt,this):u.tick&&u.tick(this.dt,this)}return this[qt]=this[Wt]?0:-1,this.$promise&&(this.$resolve(this),this.$promise=this.$resolve=null),this.listeners.raf&&this.add("raf"),this}[Xs](){return this[Wt]||(this[Wt]=!0,this[qt]==-1&&(this[qt]=0),Eh(this[Gs])),this}schedule(t,e){var r,s;return e||(e=t[r=this.id]||(t[r]={value:!0})),(e[s=this.id]||(e[s]=new sr({owner:this,target:t}))).update(e,!0)}unschedule(t,e={}){e||(e=t[this.id]);let i=e&&e[this.id];return i&&i.active&&i.deactivate(),this}},or=ur;(()=>{Qs(ur,"Scheduler")})();var B=new or;function H(){return B.add("commit").promise}function Ph(n,t){return globalThis.setTimeout(function(){n(),H()},t)}function Ih(n,t){return globalThis.setInterval(function(){n(),H()},t)}var Fh=globalThis.clearInterval,Lh=globalThis.clearTimeout,de=globalThis.imba||(globalThis.imba={});de.commit=H;de.setTimeout=Ph;de.setInterval=Ih;de.clearInterval=Fh;de.clearTimeout=Lh;function Mh(n,t){Object.defineProperty(n,"name",{value:t,configurable:!0})}var Js=Symbol.for("#toStringDeopt");var Zs=Symbol.for("#symbols"),to=Symbol.for("#batches"),eo=Symbol.for("#extras"),ar=Symbol.for("#stacks"),hr=class{constructor(t){this.dom=t,this.string=""}contains(t){return this.dom.classList.contains(t)}add(t){return this.contains(t)?this:(this.string+=(this.string?" ":"")+t,this.dom.classList.add(t),this)}remove(t){if(!this.contains(t))return this;let e=new RegExp("(^|\\s)"+t+"(?=\\s|$)","g");return this.string=this.string.replace(e,""),this.dom.classList.remove(t),this}toggle(t,e){return e===void 0&&(e=!this.contains(t)),e?this.add(t):this.remove(t)}incr(t,e=0){var i=this;let r=this.stacks,s=r[t]||0;return s<1&&this.add(t),e>0&&setTimeout(function(){return i.decr(t)},e),r[t]=Math.max(s,0)+1}decr(t){let e=this.stacks,i=e[t]||0;return i==1&&this.remove(t),e[t]=Math.max(i,1)-1}reconcile(t,e){let i=this[Zs],r=this[to],s=!0;if(!i)i=this[Zs]=[t],r=this[to]=[e||""],this.toString=this.valueOf=this[Js];else{let o=i.indexOf(t),l=e||"";o==-1?(i.push(t),r.push(l)):r[o]!=l?r[o]=l:s=!1}s&&(this[eo]=" "+r.join(" "),this.sync())}valueOf(){return this.string}toString(){return this.string}[Js](){return this.string+(this[eo]||"")}sync(){return this.dom.flagSync$()}get stacks(){return this[ar]||(this[ar]={})}},Ht=hr;(()=>{Mh(hr,"Flags")})();function lo(n,t){Object.defineProperty(n,"name",{value:t,configurable:!0})}function Rh(n){var t,e;(e=(t=Object.getPrototypeOf(n.prototype).constructor)==null?void 0:t.inherited)==null||e.call(t,n)}var io=Symbol.for("#__init__"),Dh=Symbol.for("#__patch__"),ro=Symbol.for("#__initor__"),no=Symbol.for("#__inited__"),so=Symbol.for("#__hooks__"),cr=Symbol.for("#getRenderContext"),jh=Symbol.for("#getDynamicContext"),oo=Symbol(),nt={context:null},dr=class{[Dh](t={},e=!0){var i;(i=t.stack)!==void 0&&(this.stack=i)}constructor(t=null){this[io](t)}[io](t=null,e=!0,i=!0){var r;this.stack=t&&(r=t.stack)!==void 0?r:[]}push(t){return this.stack.push(t)}pop(t){return this.stack.pop()}},fr=dr;(()=>{lo(dr,"Renderer")})();var Bd=new fr,Ut=class extends Map{constructor(t,e=null){super(),this._=t,this.sym=e,this[ro]===oo&&(this[so]&&this[so].inited(this),this[no]&&this[no]())}pop(){return nt.context=null}[cr](t){let e=this.get(t);return e||this.set(t,e=new Ut(this._,t)),nt.context=e}[jh](t,e){return this[cr](t)[cr](e)}run(t){return this.value=t,nt.context==this&&(nt.context=null),this.get(t)}cache(t){return this.set(this.value,t),t}},vt=Ut;(()=>{Ut.prototype[ro]=oo,lo(Ut,"RenderContext"),Rh(Ut)})();function uo(n,t=Symbol(),e=n){return nt.context=n[t]||(n[t]=new vt(e,t))}function ao(){let n=nt.context,t=n||new vt(null);return n&&(nt.context=null),t}function Yt(n,t){Object.defineProperty(n,"name",{value:t,configurable:!0})}function _e(n,t){let e=Object.getOwnPropertyDescriptors(t);return delete e.constructor,n.extend__ instanceof Function?n.extend__(e,t):Object.defineProperties(n,e),n}function Ah(n){var t,e;(e=(t=Object.getPrototypeOf(n.prototype).constructor)==null?void 0:t.inherited)==null||e.call(t,n)}function Vh(n){let t;return n&&((t=n.toIterable)?t.call(n):n)}var ge=Symbol.for("#parent"),ho=Symbol.for("#closestNode"),Bh=Symbol.for("#parentNode"),Kh=Symbol.for("#context"),So=Symbol.for("#__init__"),xo=Symbol.for("##inited"),mr=Symbol.for("#getRenderContext"),qh=Symbol.for("#getDynamicContext"),co=Symbol.for("#insertChild"),yr=Symbol.for("#appendChild"),pr=Symbol.for("#replaceChild"),fo=Symbol.for("#removeChild"),St=Symbol.for("#insertInto"),mo=Symbol.for("#insertIntoDeopt"),me=Symbol.for("#removeFrom"),po=Symbol.for("#removeFromDeopt"),zt=Symbol.for("#replaceWith"),$o=Symbol.for("#replaceWithDeopt"),$r=Symbol.for("#placeholderNode"),Wh=Symbol.for("#attachToParent"),Hh=Symbol.for("#detachFromParent"),Uh=Symbol.for("#placeChild"),zh=Symbol.for("#beforeReconcile"),Yh=Symbol.for("#afterReconcile"),Xh=Symbol.for("#afterVisit"),Gh=Symbol.for("#visitContext"),Co=Symbol.for("##parent"),ti=Symbol.for("##up"),gr=Symbol.for("##context"),Rt=Symbol.for("#domNode"),pe=Symbol.for("##placeholderNode"),go=Symbol.for("#domDeopt"),$e=Symbol.for("##visitContext"),Qh=Symbol.for("#isRichElement"),_o=Symbol.for("#src"),ei=Symbol.for("#htmlNodeName"),Jh=Symbol.for("#getSlot");var yo=Symbol.for("#cssns"),Zh=Symbol.for("#cssid"),{Event:$t,UIEvent:Yd,MouseEvent:wo,PointerEvent:Xd,KeyboardEvent:To,CustomEvent:ye,Node:gt,Comment:si,Text:Nr,Element:E,HTMLElement:kr,HTMLHtmlElement:Gd,HTMLSelectElement:Oo,HTMLInputElement:No,HTMLTextAreaElement:ko,HTMLButtonElement:Eo,HTMLOptionElement:Po,HTMLScriptElement:Qd,SVGElement:Io,DocumentFragment:Jd,ShadowRoot:Zd,Document:Er,Window:tm,customElements:em}=globalThis.window,_r={};function Fo(n,t,e){if(!n)return e[t]=null;if(e[t]!==void 0)return e[t];let i=Object.getOwnPropertyDescriptor(n,t);return i!==void 0||n==Io?e[t]=i||null:Fo(Reflect.getPrototypeOf(n),t,e)}var br={},vr={},tc={},ec={};var ic={get(n,t){let e=n,i;for(;e&&i==null;)(e=e[ge])&&(i=e[t]);return i},set(n,t,e){let i=n,r;for(;i&&r==null;){if(Qe(i,t,E))return i[t]=e,!0;i=i[ge]}return!0}},Ir=class{get flags(){return this.documentElement.flags}},Sr=Ir;(()=>{Yt(Ir,"Document")})();_e(Er.prototype,Sr.prototype);var Fr=class{get[ge](){return this[Co]||this.parentNode||this[ti]}get[ho](){return this}get[Bh](){return this[ge][ho]}get[Kh](){return this[gr]||(this[gr]=new Proxy(this,ic))}[So](){return this}[xo](){return this}[mr](t){return uo(this,t)}[qh](t,e){return this[mr](t)[mr](e)}[co](t,e){return t[St](this,e)}[yr](t){return t[St](this,null)}[pr](t,e){let i=this[co](t,e);return this[fo](e),i}[fo](t){return t[me](this)}[St](t,e=null){return e?t.insertBefore(this,e):t.appendChild(this),this}[mo](t,e){return e?t.insertBefore(this[Rt]||this,e):t.appendChild(this[Rt]||this),this}[me](t){return t.removeChild(this)}[po](t){return t.removeChild(this[Rt]||this)}[zt](t,e){return e[pr](t,this)}[$o](t,e){return e[pr](t,this[Rt]||this)}get[$r](){return this[pe]||(this[pe]=globalThis.document.createComment("placeholder"))}set[$r](t){let e=this[pe];this[pe]=t,e&&e!=t&&e.parentNode&&e[zt](t)}[Wh](){let t=this[Rt],e=t&&t.parentNode;return t&&e&&t!=this&&(this[Rt]=null,this[St](e,t),t[me](e)),this}[Hh](){this[go]!=!0&&(this[go]=!0,!0)&&(this[zt]=this[$o],this[me]=this[po],this[St]=this[mo],this[ti]||(this[ti]=this[ge]));let t=this[$r];return this.parentNode&&t!=this&&(t[St](this.parentNode,this),this[me](this.parentNode)),this[Rt]=t,this}[Uh](t,e,i){let r=typeof t;if(r==="undefined"||t===null){if(i&&i instanceof si)return i;let s=globalThis.document.createComment("");return i?i[zt](s,this):s[St](this,null)}if(t===i)return t;if(r!=="object"){let s,o=t;return e&128&&e&256,i?i instanceof Nr?(i.textContent=o,i):(s=globalThis.document.createTextNode(o),i[zt](s,this),s):(this.appendChild(s=globalThis.document.createTextNode(o)),s)}else return i?i[zt](t,this):t[St](this,null)}},xr=Fr;(()=>{Yt(Fr,"Node")})();_e(gt.prototype,xr.prototype);var Lr=class{log(...t){return console.log(...t)}emit(t,e,i={bubbles:!0,cancelable:!0}){e!=null&&(i.detail=e);let r=new ye(t,i),s=this.dispatchEvent(r);return r}text$(t){return this.textContent=t,this}[zh](){return this}[Yh](){return this}[Xh](){this[$e]&&(this[$e]=null)}get[Gh](){return this[$e]||(this[$e]={})}get flags(){return this.$flags||(this.$flags=new Ht(this),this.flag$==E.prototype.flag$&&(this.flags$ext=this.className),this.flagDeopt$()),this.$flags}flag$(t){let e=this.flags$ns;this.className=e?e+(this.flags$ext=t):this.flags$ext=t}flagDeopt$(){var t=this;this.flag$=this.flagExt$,this.flagSelf$=function(e){return t.flagSync$(t.flags$own=e)}}flagExt$(t){return this.flagSync$(this.flags$ext=t)}flagSelf$(t){return this.flagDeopt$(),this.flagSelf$(t)}flagSync$(){return this.className=(this.flags$ns||"")+(this.flags$ext||"")+" "+(this.flags$own||"")+" "+(this.$flags||"")}set$(t,e){let i=Qe(this,t,E);!i||!i.set?this.setAttribute(t,e):this[t]=e}get richValue(){return this.value}set richValue(t){this.value=t}},Cr=Lr;(()=>{Yt(Lr,"Element")})();_e(E.prototype,Cr.prototype);E.prototype.setns$=E.prototype.setAttributeNS;E.prototype[Qh]=!0;function $(n,t,e,i){let r=globalThis.document.createElement(n);return e&&(r.className=e),i!==null&&r.text$(i),t&&t[yr]&&t[yr](r),r}var Mr=class{set$(t,e){var s;let i=_r[s=this.nodeName]||(_r[s]={}),r=Fo(this,t,i);!r||!r.set?this.setAttribute(t,e):this[t]=e}flag$(t){let e=this.flags$ns;this.setAttribute("class",e?e+(this.flags$ext=t):this.flags$ext=t)}flagSelf$(t){var e=this;return this.flag$=function(i){return e.flagSync$(e.flags$ext=i)},this.flagSelf$=function(i){return e.flagSync$(e.flags$own=i)},this.flagSelf$(t)}flagSync$(){return this.setAttribute("class",(this.flags$ns||"")+(this.flags$ext||"")+" "+(this.flags$own||"")+" "+(this.$flags||""))}},wr=Mr;(()=>{Yt(Mr,"SVGElement")})();_e(Io.prototype,wr.prototype);var Rr=class{set src(t){if(this[_o]!=t&&(this[_o]=t,!0)){if(t&&t.adoptNode)t.adoptNode(this);else if(t&&t.type=="svg"){if(t.attributes)for(let e=t.attributes,i=0,r=Object.keys(e),s=r.length,o,l;i<s;i++)o=r[i],l=e[o],this.setAttribute(o,l);this.innerHTML=t.content}}}},Tr=Rr;(()=>{Yt(Rr,"SVGSVGElement")})();_e(SVGSVGElement.prototype,Tr.prototype);function Dt(n){return globalThis.document.createComment(n)}function Pr(n){return globalThis.document.createTextNode(n)}var ii=globalThis.navigator,rc=ii&&ii.vendor||"",bo=ii&&ii.userAgent||"",nc=rc.indexOf("Apple")>-1||bo.indexOf("CriOS")>=0||bo.indexOf("FxiOS")>=0,ri=!nc,vo=new Map,ni=class extends kr{connectedCallback(){return ri?this.parentNode.removeChild(this):this.parentNode.connectedCallback()}disconnectedCallback(){if(!ri)return this.parentNode.disconnectedCallback()}},Or=ni;(()=>{Yt(ni,"CustomHook"),Ah(ni)})();window.customElements.define("i-hook",Or);function sc(n,t){let e=vo.get(t);if(!e){e={};let i=t.prototype,r=[i];for(;(i=i&&Object.getPrototypeOf(i))&&i.constructor!=n.constructor;)r.unshift(i);for(let s=0,o=Vh(r),l=o.length;s<l;s++){let u=o[s],a=Object.getOwnPropertyDescriptors(u);Object.assign(e,a)}vo.set(t,e)}return e}function Y(n,t,e,i,r){let s;typeof n!="string"&&n&&n.nodeName&&(n=n.nodeName);let o=vr[n]||n;if(br[n]){let l=br[n],u=l.prototype[ei];if(u&&ri)s=globalThis.document.createElement(u,{is:o});else if(l.create$&&u){s=globalThis.document.createElement(u),s.setAttribute("is",o);let a=sc(s,l);Object.defineProperties(s,a),s.__slots={},s.appendChild(globalThis.document.createElement("i-hook"))}else l.create$?(s=l.create$(s),s.__slots={}):console.warn("could not create tag "+n)}else s=globalThis.document.createElement(vr[n]||n);return s[Co]=t,s[So](),s[xo](),i!==null&&s[Jh]("__").text$(i),(e||s.flags$ns)&&s.flag$(e||""),s}function Z(n,t,e={}){tc[n]=ec[n]=t,t.nodeName=n;let i=n,r=t.prototype;if(n.indexOf("-")==-1&&(i=""+n+"-tag",vr[n]=i),e.cssns){let s=(r._ns_||r[yo]||"")+" "+(e.cssns||"");r._ns_=s.trim()+" ",r[yo]=e.cssns}if(e.cssid){let s=(r.flags$ns||"")+" "+e.cssid;r[Zh]=e.cssid,r.flags$ns=s.trim()+" "}return r[ei]&&!e.extends&&(e.extends=r[ei]),e.extends?(r[ei]=e.extends,br[n]=t,ri&&window.customElements.define(i,t,{extends:e.extends})):window.customElements.define(i,t),t}var oc=globalThis.imba||(globalThis.imba={});oc.document=globalThis.document;function Kr(n,t){Object.defineProperty(n,"name",{value:t,configurable:!0})}function Dr(n){let t;return n&&((t=n.toIterable)?t.call(n):n)}function lc(n){var t,e;(e=(t=Object.getPrototypeOf(n.prototype).constructor)==null?void 0:t.inherited)==null||e.call(t,n)}function uc(n,t){let e=Object.getOwnPropertyDescriptors(t);return delete e.constructor,n.extend__ instanceof Function?n.extend__(e,t):Object.defineProperties(n,e),n}var hi=Symbol.for("#parent"),Lo=Symbol.for("#closestNode"),ac=Symbol.for("#isRichElement"),hc=Symbol.for("#afterVisit"),Mo=Symbol.for("#__initor__"),Ro=Symbol.for("#__inited__"),Do=Symbol.for("#__hooks__"),jo=Symbol.for("#appendChild"),Ao=Symbol.for("#removeChild"),Vo=Symbol.for("#replaceChild"),_t=Symbol.for("#insertInto"),oi=Symbol.for("#replaceWith"),Bo=Symbol.for("#insertChild"),li=Symbol.for("#removeFrom"),Ko=Symbol.for("#placeChild"),cc=Symbol.for("#registerFunctionalSlot"),fc=Symbol.for("#getFunctionalSlot"),qo=Symbol.for("#getSlot"),Ar=Symbol.for("##parent"),xt=Symbol.for("##up"),jr=Symbol.for("##flags"),dc=Symbol.for("#domFlags"),st=Symbol.for("#end"),Wo=Symbol.for("#textContent"),ui=Symbol.for("#textNode"),ai=Symbol.for("#functionalSlots"),Ho=Symbol();function fi(){return globalThis.imba.uses_slots=!0,!0}var qr=class{constructor(){this.childNodes=[]}log(...t){}hasChildNodes(){return!1}set[hi](t){this[Ar]=t}get[hi](){return this[Ar]||this[xt]}get[Lo](){return this[hi][Lo]}get[ac](){return!0}get flags(){return this[jr]||(this[jr]=new Ht(this))}flagSync$(){return this}[hc](){return this}},Ct=qr;(()=>{Kr(qr,"Fragment")})();var mc=0,be=class extends Ct{constructor(t,e){super(...arguments),this[xt]=e,this.parentNode=null,this[dc]=t,this.childNodes=[],this[st]=Dt("slot"+mc++),e&&e[jo](this),this[Mo]===Ho&&(this[Do]&&this[Do].inited(this),this[Ro]&&this[Ro]())}get[hi](){return this[Ar]||this.parentNode||this[xt]}set textContent(t){this[Wo]=t}get textContent(){return this[Wo]}hasChildNodes(){for(let t=0,e=Dr(this.childNodes),i=e.length;t<i;t++){let r=e[t];if(r instanceof Ct&&r.hasChildNodes())return!0;if(!(r instanceof si)){if(r instanceof gt)return!0}}return!1}text$(t){return this[ui]?this[ui].textContent=t:this[ui]=this[Ko](t),this[ui]}appendChild(t){return this.parentNode&&t[_t](this.parentNode,this[st]),this.childNodes.push(t)}[jo](t){var e;return this.parentNode?t[_t](this.parentNode,this[st]):(e=t[xt])!=null||(t[xt]=this[xt]||this),this.childNodes.push(t)}insertBefore(t,e){this.parentNode&&this.parentNode[Bo](t,e);let i=this.childNodes.indexOf(e);return i>=0&&this.childNodes.splice(i,0,t),t}[Ao](t){this.parentNode&&this.parentNode[Ao](t);let e=this.childNodes.indexOf(t);e>=0&&this.childNodes.splice(e,1)}[Vo](t,e){this.parentNode&&this.parentNode[Vo](t,e);let i=this.childNodes.indexOf(e);return this.childNodes[i]=t,t}[_t](t,e){let i=this.parentNode;if(this.parentNode!=t&&(this.parentNode=t,!0)){this[st]&&(e=this[st][_t](t,e));for(let r=0,s=Dr(this.childNodes),o=s.length;r<o;r++)s[r][_t](t,e)}return this}[oi](t,e){let i=t[_t](e,this[st]);return this[li](e),i}[Bo](t,e){if(this.parentNode&&this.insertBefore(t,e||this[st]),e){let i=this.childNodes.indexOf(e);i>=0&&this.childNodes.splice(i,0,t)}else this.childNodes.push(t);return t}[li](t){for(let e=0,i=Dr(this.childNodes),r=i.length;e<r;e++)i[e][li](t);return this[st]&&this[st][li](t),this.parentNode=null,this}[Ko](t,e,i){let r=this.parentNode,s=typeof t;if(s==="undefined"||t===null){if(i&&i instanceof si)return i;let o=Dt("");if(i){let l=this.childNodes.indexOf(i);return this.childNodes.splice(l,1,o),r&&i[oi](o,r),o}return this.childNodes.push(o),r&&o[_t](r,this[st]),o}if(t===i)return t;if(s!=="object"){let o,l=t;if(i){if(i instanceof Nr)return i.textContent=l,i;{o=Pr(l);let u=this.childNodes.indexOf(i);return this.childNodes.splice(u,1,o),r&&i[oi](o,r),o}}else return this.childNodes.push(o=Pr(l)),r&&o[_t](r,this[st]),o}else if(i){let o=this.childNodes.indexOf(i);return this.childNodes.splice(o,1,t),r&&i[oi](t,r),t}else return this.childNodes.push(t),r&&t[_t](r,this[st]),t}},Vr=be;(()=>{be.prototype[Mo]=Ho,Kr(be,"VirtualFragment"),lc(be)})();function ci(n,t){let e=new Vr(n,null);return e[xt]=t,e}var Wr=class{[cc](t){let e=this[ai]||(this[ai]={});return e[t]||(e[t]=ci(0,this))}[fc](t,e){let i=this[ai];return i&&i[t]||this[qo](t,e)}[qo](t,e){var i;return t=="__"&&!this.render||!this.__slots?this:(i=this.__slots)[t]||(i[t]=ci(0,this))}},Br=Wr;(()=>{Kr(Wr,"Node")})();uc(gt.prototype,Br.prototype);function pc(n){let t;return n&&((t=n.toIterable)?t.call(n):n)}function $c(n,t){Object.defineProperty(n,"name",{value:t,configurable:!0})}function gc(n){var t,e;(e=(t=Object.getPrototypeOf(n.prototype).constructor)==null?void 0:t.inherited)==null||e.call(t,n)}var _c=Symbol.for("#afterVisit"),di=Symbol.for("#insertInto"),Uo=Symbol.for("#appendChild"),yc=Symbol.for("#replaceWith"),Hr=Symbol.for("#removeFrom"),zo=Symbol.for("#__initor__"),Yo=Symbol.for("#__inited__"),Xo=Symbol.for("#__hooks__"),bc=Symbol.for("#domFlags"),vc=Symbol.for("##parent"),wt=Symbol.for("#end"),Sc=Symbol.for("#removeChild"),xc=Symbol.for("#insertChild"),Go=Symbol(),ve=class extends Ct{constructor(t,e){super(...arguments),this[bc]=t,this[vc]=e,t&256||(this[wt]=Dt("list")),this.$=this.childNodes,this.length=0,e&&e[Uo](this),this[zo]===Go&&(this[Xo]&&this[Xo].inited(this),this[Yo]&&this[Yo]())}hasChildNodes(){return this.length!=0}[_c](t){let e=this.length;if(this.length=t,e==t)return;let i=this.parentNode;if(!i)return;let r=this.childNodes,s=this[wt];if(e>t)for(;e>t;)i[Sc](r[--e]);else if(t>e)for(;t>e;)i[xc](r[e++],s);this.length=t}[di](t,e){this.parentNode=t,this[wt]&&this[wt][di](t,e),e=this[wt];for(let i=0,r=pc(this.childNodes),s=r.length;i<s;i++){let o=r[i];if(i==this.length)break;o[di](t,e)}return this}[Uo](t){}[yc](t,e){let i=t[di](e,this[wt]);return this[Hr](e),i}[Hr](t){let e=this.length;for(;e>0;)this.childNodes[--e][Hr](t);this[wt]&&t.removeChild(this[wt]),this.parentNode=null}},Ur=ve;(()=>{ve.prototype[zo]=Go,$c(ve,"IndexedTagFragment"),gc(ve)})();function Se(n,t){return new Ur(n,t)}function Qo(n){let t;return n&&((t=n.toIterable)?t.call(n):n)}function Cc(n,t){Object.defineProperty(n,"name",{value:t,configurable:!0})}function wc(n){var t,e;(e=(t=Object.getPrototypeOf(n.prototype).constructor)==null?void 0:t.inherited)==null||e.call(t,n)}var zr=Symbol.for("#appendChild"),mi=Symbol.for("#insertChild"),Tc=Symbol.for("#replaceWith"),pi=Symbol.for("#insertInto"),Yr=Symbol.for("#removeFrom"),Oc=Symbol.for("#afterVisit"),Jo=Symbol.for("#__initor__"),Zo=Symbol.for("#__inited__"),tl=Symbol.for("#__hooks__"),$i=Symbol.for("#domFlags"),el=Symbol.for("##parent"),Tt=Symbol.for("#end"),il=Symbol.for("#removeChild"),rl=Symbol(),xe=class extends Ct{constructor(t,e){super(...arguments),this[$i]=t,this[el]=e,this.changes=new Map,this.dirty=!1,this.array=this.childNodes,this.$=new vt(this,Symbol()),t&256||(this[Tt]=Dt("map")),e&&e[zr](this),this[Jo]===rl&&(this[tl]&&this[tl].inited(this),this[Zo]&&this[Zo]())}[zr](t){if(this.parentNode)return this.parentNode[mi](t,this[Tt])}hasChildNodes(){return this.childNodes.length!=0}push(t,e){if(!(this[$i]&1)){this.array.push(t),this[zr](t);return}let i=this.array[e];if(i!==t){this.dirty=!0;let r=this.array.indexOf(t),s=this.changes.get(t);r===-1?(this.array.splice(e,0,t),this.insertChild(t,e,r)):r===e+1?(i&&this.changes.set(i,-1),this.array.splice(e,1)):(r>=0&&this.array.splice(r,1),this.array.splice(e,0,t),this.moveChild(t,e,r)),s==-1&&this.changes.delete(t)}}insertChild(t,e,i){let r=this.parentNode;if(!!r)if(e>0){let s=this.array[e-1];r[mi](t,s.nextSibling)}else r[mi](t,this.childNodes[e+1]||this[Tt])}moveChild(t,e,i){return this.insertChild(t,e,i)}removeChild(t,e){t.parentNode&&t[Yr](t.parentNode)}[mi](t,e){}[Tc](t,e){let i=t[pi](e,this[Tt]);return this[Yr](e),i}[pi](t,e){this[el]=t;let i=this.parentNode;if(t!=i){this.parentNode=t;for(let r=0,s=Qo(this.array),o=s.length;r<o;r++)s[r][pi](t,e);this[Tt]&&this[Tt][pi](t,e)}return this}[Yr](t){for(let e=0,i=Qo(this.array),r=i.length;e<r;e++){let s=i[e];t[il](s)}return this[Tt]&&t[il](this[Tt]),this.parentNode=null}[Oc](t){var e=this;if(!(this[$i]&1)){this[$i]|=1;return}if(this.dirty&&(this.changes.forEach(function(i,r){if(i==-1)return e.removeChild(r)}),this.changes.clear(),this.dirty=!1),this.array.length>t)for(;this.array.length>t;){let i=this.array.pop();this.removeChild(i)}}},Xr=xe;(()=>{xe.prototype[Jo]=rl,Cc(xe,"KeyedTagFragment"),wc(xe)})();function gi(n,t){return new Xr(n,t)}function Nc(n,t){Object.defineProperty(n,"name",{value:t,configurable:!0})}function kc(n){var t,e;(e=(t=Object.getPrototypeOf(n.prototype).constructor)==null?void 0:t.inherited)==null||e.call(t,n)}var yi=Symbol.for("#__init__"),Ec=Symbol.for("#__patch__"),Pc=Symbol.for("##inited"),Ic=Symbol.for("#afterVisit"),Fc=Symbol.for("#beforeReconcile"),Lc=Symbol.for("#afterReconcile"),nl=Symbol.for("#__hooks__"),jt=Symbol.for("#autorender"),_i=Symbol.for("##visitContext"),Mc=new class{[Ec](n={},t=!0){var e;(e=n.items)!==void 0&&(this.items=e),(e=n.current)!==void 0&&(this.current=e),(e=n.lastQueued)!==void 0&&(this.lastQueued=e),(e=n.tests)!==void 0&&(this.tests=e)}constructor(n=null){this[yi](n)}[yi](n=null,t=!0,e=!0){var i;this.items=n&&(i=n.items)!==void 0?i:[],this.current=n&&(i=n.current)!==void 0?i:null,this.lastQueued=n&&(i=n.lastQueued)!==void 0?i:null,this.tests=n&&(i=n.tests)!==void 0?i:0}flush(){let n=null;for(;n=this.items.shift();){if(!n.parentNode||n.hydratedΦ)continue;let t=this.current;this.current=n,n.__F|=1024,n.connectedCallback(),this.current=t}}queue(n){var t=this;let e=this.items.length,i=0,r=this.lastQueued;this.lastQueued=n;let s=gt.DOCUMENT_POSITION_PRECEDING,o=gt.DOCUMENT_POSITION_FOLLOWING;if(e){let l=this.items.indexOf(r),u=l,a=function(h,d){return t.tests++,h.compareDocumentPosition(d)};(l==-1||r.nodeName!=n.nodeName)&&(u=l=0);let c=this.items[u];for(;c&&a(c,n)&o;)c=this.items[++u];if(u!=l)c?this.items.splice(u,0,n):this.items.push(n);else{for(;c&&a(c,n)&s;)c=this.items[--u];u!=l&&(c?this.items.splice(u+1,0,n):this.items.unshift(n))}}else this.items.push(n),this.current||globalThis.queueMicrotask(this.flush.bind(this))}};var bi=class extends kr{constructor(){super(),this.flags$ns&&(this.flag$=this.flagExt$),this.setup$(),this.build()}setup$(){return this.__slots={},this.__F=0}[yi](){return this.__F|=3,this}[Pc](){if(this[nl])return this[nl].inited(this)}flag$(t){this.className=this.flags$ext=t}build(){return this}awaken(){return this}mount(){return this}unmount(){return this}rendered(){return this}dehydrate(){return this}hydrate(){return this.autoschedule=!0,this}tick(){return this.commit()}visit(){return this.commit()}commit(){return this.renderΦ?(this.__F|=256,this.render&&this.render(),this.rendered(),this.__F=(this.__F|512)&-257&-8193):(this.__F|=8192,this)}get autoschedule(){return(this.__F&64)!=0}set autoschedule(t){t?this.__F|=64:this.__F&=-65}set autorender(t){let e=this[jt]||(this[jt]={});e.value=t,this.mountedΦ&&B.schedule(this,e)}get renderΦ(){return!this.suspendedΦ}get mountingΦ(){return(this.__F&16)!=0}get mountedΦ(){return(this.__F&32)!=0}get awakenedΦ(){return(this.__F&8)!=0}get renderedΦ(){return(this.__F&512)!=0}get suspendedΦ(){return(this.__F&4096)!=0}get renderingΦ(){return(this.__F&256)!=0}get scheduledΦ(){return(this.__F&128)!=0}get hydratedΦ(){return(this.__F&2)!=0}get ssrΦ(){return(this.__F&1024)!=0}schedule(){return B.on("commit",this),this.__F|=128,this}unschedule(){return B.un("commit",this),this.__F&=-129,this}async suspend(t=null){let e=this.flags.incr("@suspended");return this.__F|=4096,t instanceof Function&&(await t(),this.unsuspend()),this}unsuspend(){return this.flags.decr("@suspended")==0&&(this.__F&=-4097,this.commit()),this}[Ic](){if(this.visit(),this[_i])return this[_i]=null}[Fc](){return this.__F&1024&&(this.__F=this.__F&-1025,this.classList.remove("_ssr_"),this.flags$ext&&this.flags$ext.indexOf("_ssr_")==0&&(this.flags$ext=this.flags$ext.slice(5)),this.__F&512||(this.innerHTML="")),this[_i]&&(this[_i]=null),this}[Lc](){return this}connectedCallback(){let t=this.__F,e=t&1,i=t&8;if(!e&&!(t&1024)){Mc.queue(this);return}if(t&48)return;this.__F|=16,e||this[yi](),t&2||(this.flags$ext=this.className,this.__F|=2,this.hydrate(),this.commit()),i||(this.awaken(),this.__F|=8),ht(this,"mount");let r=this.mount();return r&&r.then instanceof Function&&r.then(B.commit),t=this.__F=(this.__F|32)&-17,t&64&&this.schedule(),this[jt]&&B.schedule(this,this[jt]),this}disconnectedCallback(){if(this.__F=this.__F&-49,this.__F&128&&this.unschedule(),ht(this,"unmount"),this.unmount(),this[jt])return B.unschedule(this,this[jt])}},K=bi;(()=>{Nc(bi,"Component"),kc(bi)})();function ll(n,t){Object.defineProperty(n,"name",{value:t,configurable:!0})}function Rc(n,t){let e=Object.getOwnPropertyDescriptors(t);return delete e.constructor,n.extend__ instanceof Function?n.extend__(e,t):Object.defineProperties(n,e),n}var sl=Symbol.for("#__init__"),Dc=Symbol.for("#__patch__");var jc={cm:1,mm:1,Q:1,pc:1,pt:1,px:1,em:1,ex:1,ch:1,rem:1,vw:1,vh:1,vmin:1,vmax:1,s:1,ms:1,fr:1,"%":1,in:1,turn:1,grad:1,rad:1,deg:1,Hz:1,kHz:1};var ol={prefix:1,suffix:1,content:1},Jr={rose:[[356,100,97],[356,100,95],[353,96,90],[353,96,82],[351,95,71],[350,89,60],[347,77,50],[345,83,41],[343,80,35],[342,75,30]],pink:[[327,73,97],[326,78,95],[326,85,90],[327,87,82],[329,86,70],[330,81,60],[333,71,51],[335,78,42],[336,74,35],[336,69,30]],fuchsia:[[289,100,98],[287,100,95],[288,96,91],[291,93,83],[292,91,73],[292,84,61],[293,69,49],[295,72,40],[295,70,33],[297,64,28]],purple:[[270,100,98],[269,100,95],[269,100,92],[269,97,85],[270,95,75],[271,91,65],[271,81,56],[272,72,47],[273,67,39],[274,66,32]],violet:[[250,100,98],[251,91,95],[251,95,92],[252,95,85],[255,92,76],[258,90,66],[262,83,58],[263,70,50],[263,69,42],[264,67,35]],indigo:[[226,100,97],[226,100,94],[228,96,89],[230,94,82],[234,89,74],[239,84,67],[243,75,59],[245,58,51],[244,55,41],[242,47,34]],blue:[[214,100,97],[214,95,93],[213,97,87],[212,96,78],[213,94,68],[217,91,60],[221,83,53],[224,76,48],[226,71,40],[224,64,33]],sky:[[204,100,97],[204,94,94],[201,94,86],[199,95,74],[198,93,60],[199,89,48],[200,98,39],[201,96,32],[201,90,27],[202,80,24]],cyan:[[183,100,96],[185,96,90],[186,94,82],[187,92,69],[188,86,53],[189,94,43],[192,91,36],[193,82,31],[194,70,27],[196,64,24]],teal:[[166,76,97],[167,85,89],[168,84,78],[171,77,64],[172,66,50],[173,80,40],[175,84,32],[175,77,26],[176,69,22],[176,61,19]],emerald:[[152,81,96],[149,80,90],[152,76,80],[156,72,67],[158,64,52],[160,84,39],[161,94,30],[163,94,24],[163,88,20],[164,86,16]],green:[[138,76,97],[141,84,93],[141,79,85],[142,77,73],[142,69,58],[142,71,45],[142,76,36],[142,72,29],[143,64,24],[144,61,20]],lime:[[78,92,95],[80,89,89],[81,88,80],[82,85,67],[83,78,55],[84,81,44],[85,85,35],[86,78,27],[86,69,23],[88,61,20]],yellow:[[55,92,95],[55,97,88],[53,98,77],[50,98,64],[48,96,53],[45,93,47],[41,96,40],[35,92,33],[32,81,29],[28,73,26]],amber:[[48,100,96],[48,96,89],[48,97,77],[46,97,65],[43,96,56],[38,92,50],[32,95,44],[26,90,37],[23,83,31],[22,78,26]],orange:[[33,100,96],[34,100,92],[32,98,83],[31,97,72],[27,96,61],[25,95,53],[21,90,48],[17,88,40],[15,79,34],[15,75,28]],red:[[0,86,97],[0,93,94],[0,96,89],[0,94,82],[0,91,71],[0,84,60],[0,72,51],[0,74,42],[0,70,35],[0,63,31]],warmer:[[60,9,98],[60,5,96],[20,6,90],[24,6,83],[24,5,64],[25,5,45],[33,5,32],[30,6,25],[12,6,15],[24,10,10]],warm:[[0,0,98],[0,0,96],[0,0,90],[0,0,83],[0,0,64],[0,0,45],[0,0,32],[0,0,25],[0,0,15],[0,0,9]],gray:[[0,0,98],[240,5,96],[240,6,90],[240,5,84],[240,5,65],[240,4,46],[240,5,34],[240,5,26],[240,4,16],[240,6,10]],cool:[[210,20,98],[220,14,96],[220,13,91],[216,12,84],[218,11,65],[220,9,46],[215,14,34],[217,19,27],[215,28,17],[221,39,11]],cooler:[[210,40,98],[210,40,96],[214,32,91],[213,27,84],[215,20,65],[215,16,47],[215,19,35],[215,25,27],[217,33,17],[222,47,11]]},Ac=new RegExp("^("+Object.keys(Jr).join("|")+")(\\d+(?:\\.\\d+)?)$"),Vc=/^([xyz])$/,Bc=/^([tlbr]|size|[whtlbr]|[mps][tlbrxy]?|[rcxy]?[gs])$/,Kc=`*,::before,::after {
box-sizing: border-box;
border-width: 0;
border-style: solid;
border-color: currentColor;
}`,Zr=class{[Dc](t={},e=!0){var i;(i=t.entries)!==void 0&&(this.entries=i)}constructor(t=null){this[sl](t)}[sl](t=null,e=!0,i=!0){var r;this.entries=t&&(r=t.entries)!==void 0?r:{}}register(t,e){let i=this.entries[t];i?i&&(i.css=e,i.node&&(i.node.textContent=e)):(i=this.entries[t]={sourceId:t,css:e},this.entries.resets||this.register("resets",Kc),i.node=globalThis.document.createElement("style"),i.node.setAttribute("data-id",t),i.node.textContent=i.css,globalThis.document.head.appendChild(i.node))}toString(){return Object.values(this.entries).map(function(t){return t.css}).join(`

`)}toValue(t,e,i,r=null){let s;ol[i]&&(t=String(t));let o=typeof t;if(o=="number"){if(e||(Vc.test(i)?e="px":Bc.test(i)?e="u":i=="rotate"&&(e="turn",t=(t%1).toFixed(4))),e)return jc[e]?t+e:e=="u"?t*4+"px":"calc(var(--u_"+e+",1px) * "+t+")"}else if(o=="string"){if(i&&ol[i]&&t[0]!='"'&&t[0]!="'"&&(t.indexOf('"')>=0?t.indexOf("'")==-1&&(t="'"+t+"'"):t='"'+t+'"'),s=t.match(Ac)){let u=Jr[s[1]][parseInt(s[2])],a="100%";if(typeof r=="number"?a=r+"%":typeof r=="string"&&(a=r),u)return"hsla("+u[0]+","+u[1]+"%,"+u[2]+"%,"+a+")"}}else if(t&&t.toStyleString instanceof Function)return t.toStyleString();return t}parseDimension(t){if(typeof t=="string"){let[e,i,r]=t.match(/^([-+]?[\d\.]+)(%|\w+)$/);return[parseFloat(i),r]}else if(typeof t=="number")return[t]}},Gr=Zr;(()=>{ll(Zr,"Styles")})();var qc=new Gr,wm=Object.keys(Jr);function ul(){return globalThis.imba.uses_styles=!0,!0}var tn=class{css$(t,e,i){return this.style[t]=e}css$var(t,e,i,r,s=null){let o=qc.toValue(e,i,r,s);this.style.setProperty(t,o)}},Qr=tn;(()=>{ll(tn,"Element")})();Rc(E.prototype,Qr.prototype);var Wc=Symbol.for("#insertInto"),al=Symbol.for("#removeFrom");function en(n,t){let e=t||globalThis.document.body,i=n;if(n instanceof Function){let r=new vt(e,null),s=function(){let o=nt.context;nt.context=r;let l=n(r);return nt.context==r&&(nt.context=o),l};i=s(),B.listen("commit",s)}else i.__F|=64;return i[Wc](e),i}function Hc(n){return n&&n[al]&&n[al](n.parentNode),n}var hl=globalThis.imba||(globalThis.imba={});hl.mount=en;hl.unmount=Hc;function Xt(n,t){Object.defineProperty(n,"name",{value:t,configurable:!0})}function Gt(n,t){let e=Object.getOwnPropertyDescriptors(t);return delete e.constructor,n.extend__ instanceof Function?n.extend__(e,t):Object.defineProperties(n,e),n}function Ce(n){let t;return n&&((t=n.toIterable)?t.call(n):n)}var we=Symbol.for("##onchange"),Oe=Symbol.for("#afterVisit"),Te=Symbol.for("##oninput"),vi=Symbol.for("##onclick"),Ne=Symbol.for("##bound"),Ot=Symbol.for("##visitContext");function Si(){return globalThis.imba.uses_dom_bind=!0,!0}var Uc={INPUT:!0,SELECT:!0,TEXTAREA:!0,BUTTON:!0},rn=function(n){return n instanceof Array||n&&n.has instanceof Function},hn=function(n,t){return n==t?!0:n instanceof Array?n.indexOf(t)>=0:n&&n.has instanceof Function?n.has(t):n&&n.contains instanceof Function?n.contains(t):!1},cn=function(n,t){if(n instanceof Array)return n.push(t);if(n&&n.add instanceof Function)return n.add(t)},fn=function(n,t){if(n instanceof Array){let e=n.indexOf(t);if(e>=0)return n.splice(e,1)}else if(n&&n.delete instanceof Function)return n.delete(t)};function zc(n){function t(){return n[0]?n[0][n[1]]:void 0}function e(i){return n[0]?n[0][n[1]]=i:null}return{get:t,set:e}}var dn=class{getRichValue(){return this.value}setRichValue(t){return this.value=t}bind$(t,e){let i=e||[];return t=="data"&&!this[Ne]&&Uc[this.nodeName]&&(this[Ne]=!0,this[we]&&this.addEventListener("change",this[we]=this[we].bind(this)),this[Te]&&this.addEventListener("input",this[Te]=this[Te].bind(this),{capture:!0}),this[vi]&&this.addEventListener("click",this[vi]=this[vi].bind(this),{capture:!0})),Object.defineProperty(this,t,i instanceof Array?zc(i):i),i}},nn=dn;(()=>{Xt(dn,"Element")})();Gt(E.prototype,nn.prototype);Object.defineProperty(E.prototype,"richValue",{get:function(){return this.getRichValue()},set:function(n){return this.setRichValue(n)}});var mn=class{[we](t){let e=this.data,i=this.$$value;this.$$value=void 0;let r=this.getRichValue();if(this.multiple){if(i)for(let s=0,o=Ce(i),l=o.length;s<l;s++){let u=o[s];r.indexOf(u)==-1&&fn(e,u)}for(let s=0,o=Ce(r),l=o.length;s<l;s++){let u=o[s];(!i||i.indexOf(u)==-1)&&cn(e,u)}}else this.data=r[0];return H(),this}getRichValue(){var t;if(this.$$value)return this.$$value;t=[];for(let e=0,i=Ce(this.selectedOptions),r=i.length;e<r;e++){let s=i[e];t.push(s.richValue)}return this.$$value=t}syncValue(){let t=this.data;if(this.multiple){let e=[];for(let i=0,r=Ce(this.options),s=r.length;i<s;i++){let o=r[i],l=o.richValue,u=hn(t,l);o.selected=u,u&&e.push(l)}this.$$value=e}else for(let e=0,i=Ce(this.options),r=i.length;e<r;e++){let o=i[e].richValue;if(o==t){this.$$value=[o],this.selectedIndex=e;break}}}[Oe](){if(this.syncValue(),this[Ot])return this[Ot]=null}},sn=mn;(()=>{Xt(mn,"HTMLSelectElement")})();Gt(Oo.prototype,sn.prototype);var pn=class{setRichValue(t){return this.$$value=t,this.value=t}getRichValue(){return this.$$value!==void 0?this.$$value:this.value}},on=pn;(()=>{Xt(pn,"HTMLOptionElement")})();Gt(Po.prototype,on.prototype);var $n=class{setRichValue(t){return this.$$value=t,this.value=t}getRichValue(){return this.$$value!==void 0?this.$$value:this.value}[Te](t){return this.data=this.value,H()}[Oe](){let t=this.data;if(t==null&&(t=""),this[Ne]&&this.value!=t&&(this.value=t),this[Ot])return this[Ot]=null}},ln=$n;(()=>{Xt($n,"HTMLTextAreaElement")})();Gt(ko.prototype,ln.prototype);var gn=class{[Te](t){let e=this.type;if(!(e=="checkbox"||e=="radio")&&!(e=="number"&&Number.isNaN(this.valueAsNumber)))return this.$$value=void 0,this.data=this.richValue,H()}[we](t){let e=this.data,i=this.richValue;if(this.type=="checkbox"||this.type=="radio"){let r=this.checked;rn(e)?r?cn(e,i):fn(e,i):this.data=r?i:!1}return H()}setRichValue(t){this.$$value!==t&&(this.$$value=t,this.value!==t&&(this.value=t))}getRichValue(){if(this.$$value!==void 0)return this.$$value;let t=this.value,e=this.type;if(e=="range"||e=="number"){let i=this.valueAsNumber;Number.isNaN(i)&&(i=Number(t.replace(/\,/,".")+0)),Number.isNaN(i)&&(i=null),t=i}else e=="checkbox"&&(t==null||t==="on")&&(t=!0);return t}[Oe](){if(this[Ne]){let t=this.type;if(t=="checkbox"||t=="radio"){let e=this.data;e===!0||e===!1||e==null?this.checked=!!e:this.checked=hn(e,this.richValue)}else this.richValue=this.data}this[Ot]&&(this[Ot]=null)}},un=gn;(()=>{Xt(gn,"HTMLInputElement")})();Gt(No.prototype,un.prototype);var _n=class{get checked(){return this.$checked}set checked(t){t!=this.$checked&&(this.$checked=t,this.flags.toggle("checked",!!t))}setRichValue(t){return this.$$value=t,this.value=t}getRichValue(){return this.$$value!==void 0?this.$$value:this.value}[vi](t){let e=this.data,i=this.checked,r=this.richValue;return rn(e)?i?fn(e,r):cn(e,r):this.$$value==null?this.data=!i:this.data=i?null:r,this[Oe](),H()}[Oe](){if(this[Ne]){let t=this.data,e=this.$$value==null?!0:this.$$value;rn(t)?this.checked=hn(t,e):this.checked=t==e}this[Ot]&&(this[Ot]=null)}},an=_n;(()=>{Xt(_n,"HTMLButtonElement")})();Gt(Eo.prototype,an.prototype);function cl(n){let t;return n&&((t=n.toIterable)?t.call(n):n)}function gl(n,t){Object.defineProperty(n,"name",{value:t,configurable:!0})}function _l(n){var t,e;(e=(t=Object.getPrototypeOf(n.prototype).constructor)==null?void 0:t.inherited)==null||e.call(t,n)}var Yc=Symbol.for("#getSlot"),Xc=Symbol.for("#container"),Gc=Symbol.for("#afterVisit"),ke=Symbol.for("#__init__"),yn=Symbol.for("#__patch__"),fl=Symbol.for("#__initor__"),dl=Symbol.for("#__inited__"),ml=Symbol.for("#__hooks__"),xi=Symbol.for("#listeners"),ct=Symbol.for("#slot"),Qc=Symbol.for("#parent"),tt=Symbol.for("##container"),Ci=Symbol.for("#domTarget"),pl=Symbol.for("#insertInto"),Jc=Symbol.for("#removeFrom"),Zc=Symbol.for("#teleport"),tf=Symbol.for("#self"),ef=Symbol.for("#target"),$l=Symbol(),Ee=class extends K{[yn](t={},e=!0){var i;super[yn]&&super[yn](t,e),(i=t.to)!==void 0&&(this.to=i)}constructor(){super(...arguments),super[ke]||this[ke](),this[fl]===$l&&(this[ml]&&this[ml].inited(this),this[dl]&&this[dl]())}[ke](t=null,e=!0,i=!0){e&&super[ke]&&super[ke](...arguments),this.to=t?t.to:void 0}build(){return this[xi]=[],this.win=globalThis,this.doc=globalThis.document}setup(){return this.setAttribute("style","display:none !important;")}[Yc](t,e){return this[ct]||(this[ct]=ci(0,this[Qc])),this[ct]}get[Xc](){if(!this[tt]){let t=this.className;this[tt]=this.doc.createElement("div"),this[tt].className=t,this[tt].style.cssText="display:contents !important;"}return this[tt]}get domTarget(){return this[Ci]||(this[Ci]=this.to instanceof E?this.to:this.closest(this.to)||this.doc.querySelector(this.to))}get eventTarget(){return this.domTarget}get style(){return this[tt]?this[tt].style:super.style}get classList(){return this[tt]?this[tt].classList:super.classList}get className(){return this[tt]?this[tt].className:super.className}set className(t){this[tt]?this[tt].className=t:super.className=t}[Gc](){if(this.mountedΦ&&this[ct]&&!this[ct].parentNode)return this[ct][pl](this.target)}mount(){for(let e=0,i=cl(this[xi]),r=i.length;e<r;e++){let[s,o,l]=i[e];this.eventTarget.addEventListener(s,o,l)}let t=this.domTarget;return this[ct]&&this[ct][pl](t),this}unmount(){for(let t=0,e=cl(this[xi]),i=e.length;t<i;t++){let[r,s,o]=e[t];this.eventTarget.removeEventListener(r,s,o)}return this[ct]&&this[ct][Jc](this.domTarget),this[Ci]=null,this}addEventListener(t,e,i={}){var r;if(e[Zc]=this,e[tf]=this,this[xi].push([t,e,i]),this.mountedΦ&&((r=this.eventTarget)==null?void 0:r.addEventListener))return this.eventTarget.addEventListener(t,e,i)}},wi=Ee;(()=>{Ee.prototype[fl]=$l,gl(Ee,"TeleportHook"),_l(Ee)})();var Ti=class extends wi{get domTarget(){return this.doc.body}get eventTarget(){return this.win}addEventListener(t,e,i={}){return e[ef]=this.domTarget.parentNode,super.addEventListener(...arguments)}on$resize(t,e,i,r){return this.addEventListener("resize",i,r),i}},bn=Ti;(()=>{gl(Ti,"GlobalHook"),_l(Ti)})();globalThis.customElements&&(globalThis.customElements.define("i-teleport",wi),globalThis.customElements.define("i-global",bn));function yl(){return globalThis.imba.uses_dom_teleport=!0,!0}function rf(n,t){Object.defineProperty(n,"name",{value:t,configurable:!0})}function nf(n,t){let e=Object.getOwnPropertyDescriptors(t);return delete e.constructor,n.extend__ instanceof Function?n.extend__(e,t):Object.defineProperties(n,e),n}function Qt(){return globalThis.imba.uses_events_keyboard=!0,!0}var Sn=class{αesc(){return this.keyCode==27}αtab(){return this.keyCode==9}αenter(){return this.keyCode==13}αspace(){return this.keyCode==32}αup(){return this.keyCode==38}αdown(){return this.keyCode==40}αleft(){return this.keyCode==37}αright(){return this.keyCode==39}αdel(){return this.keyCode==8||this.keyCode==46}αkey(t){if(typeof t=="string")return this.key==t;if(typeof t=="number")return this.keyCode==t}},vn=Sn;(()=>{rf(Sn,"KeyboardEvent")})();nf(To.prototype,vn.prototype);function sf(n,t){Object.defineProperty(n,"name",{value:t,configurable:!0})}function of(n,t){let e=Object.getOwnPropertyDescriptors(t);return delete e.constructor,n.extend__ instanceof Function?n.extend__(e,t):Object.defineProperties(n,e),n}function Nt(){return globalThis.imba.uses_events_mouse=!0,!0}var Cn=class{αleft(){return this.button==0}αmiddle(){return this.button==1}αright(){return this.button==2}αshift(){return!!this.shiftKey}αalt(){return!!this.altKey}αctrl(){return!!this.ctrlKey}αmeta(){return!!this.metaKey}αmod(){let t=globalThis.navigator.platform;return/^(Mac|iPhone|iPad|iPod)/.test(t||"")?!!this.metaKey:!!this.ctrlKey}},xn=Cn;(()=>{sf(Cn,"MouseEvent")})();of(wo.prototype,xn.prototype);function Ni(n,t){Object.defineProperty(n,"name",{value:t,configurable:!0})}function Pn(n,t){let e=Object.getOwnPropertyDescriptors(t);return delete e.constructor,n.extend__ instanceof Function?n.extend__(e,t):Object.defineProperties(n,e),n}function wn(n){let t;return n&&((t=n.toIterable)?t.call(n):n)}var lf=Symbol.for("#extendType"),uf=Symbol.for("#modifierState"),Oi=Symbol.for("#sharedModifierState"),bl=Symbol.for("#onceHandlerEnd");var Tn=Symbol.for("#extendDescriptors"),et=Symbol.for("#context"),vl=Symbol.for("#self"),af=Symbol.for("#target"),Sl=Symbol.for("#stopPropagation"),xl=Symbol.for("#defaultPrevented"),hf=Symbol.for("#teleport");Qt();Nt();var In=class{[lf](t){var e,i;let r=t[Tn]||(t[Tn]=(e=Object.getOwnPropertyDescriptors(t.prototype),i=e.constructor,delete e.constructor,e));return Object.defineProperties(this,r)}},On=In;(()=>{Ni(In,"CustomEvent")})();Pn(ye.prototype,On.prototype);var Fn=class{get[uf](){var t,e;return(t=this[et])[e=this[et].step]||(t[e]={})}get[Oi](){var t,e;return(t=this[et].handler)[e=this[et].step]||(t[e]={})}[bl](t){return G(this[et],"end",t)}αsel(t){return!!this.target.matches(String(t))}αclosest(t){return!!this.target.closest(String(t))}αlog(...t){return console.info(...t),!0}αtrusted(){return!!this.isTrusted}αif(t){return!!t}αwait(t=250){return new Promise(function(e){return setTimeout(e,fe(t))})}αself(){return this.target==this[et].element}αcooldown(t=250){let e=this[Oi];return e.active?!1:(e.active=!0,e.target=this[et].element,e.target.flags.incr("cooldown"),this[bl](function(){return setTimeout(function(){return e.target.flags.decr("cooldown"),e.active=!1},fe(t))}),!0)}αthrottle(t=250){let e=this[Oi];return e.active?(e.next&&e.next(!1),new Promise(function(i){return e.next=function(r){return e.next=null,i(r)}})):(e.active=!0,e.el||(e.el=this[et].element),e.el.flags.incr("throttled"),G(this[et],"end",function(){let i=fe(t);return e.interval=setInterval(function(){e.next?e.next(!0):(clearInterval(e.interval),e.el.flags.decr("throttled"),e.active=!1)},i)}),!0)}αdebounce(t=250){let e=this[Oi],i=this;return e.queue||(e.queue=[]),e.queue.push(e.last=i),new Promise(function(r){return setTimeout(function(){return e.last==i?(i.debounced=e.queue,e.last=null,e.queue=[],r(!0)):r(!1)},fe(t))})}αflag(t,e){let{element:i,step:r,state:s,id:o,current:l}=this[et],u=e instanceof E?e:e?i.closest(e):i;if(!u)return!0;this[et].commit=!0,s[r]=o,u.flags.incr(t);let a=Date.now();return G(l,"end",function(){let c=Date.now()-a,h=Math.max(250-c,0);return setTimeout(function(){return u.flags.decr(t)},h)}),!0}αbusy(t){return this.αflag("busy",t)}αoutside(){let{handler:t}=this[et];if(t&&t[vl])return!t[vl].parentNode.contains(this.target)}async αpost(t,e={}){return await globalThis.fetch(t,{method:"POST",...e})}async αfetch(t,e={}){return await globalThis.fetch(t,e)}},Nn=Fn;(()=>{Ni(Fn,"Event")})();Pn($t.prototype,Nn.prototype);function dt(){return globalThis.imba.uses_events=!0,!0}var Ln=class{constructor(t,e){this.params=t,this.closure=e}getHandlerForMethod(t,e){return t?t[e]?t:this.getHandlerForMethod(t.parentNode,e):null}abortCurrentHandlers(){var t;if(this.currentEvents)for(let e of wn(this.currentEvents))e.aborted=!0,(t=e==null?void 0:e.resolver)==null||t.call(e,!0);return this}emit(t,...e){return ht(this,t,e)}on(t,...e){return bt(this,t,...e)}once(t,...e){return G(this,t,...e)}un(t,...e){return Mt(this,t,...e)}get passiveΦ(){return this.params.passive}get captureΦ(){return this.params.capture}get silentΦ(){return this.params.silent}get globalΦ(){return this.params.global}async handleEvent(t){let e=this[af]||t.currentTarget,i=this.params,r=null,s=i.silence||i.silent;this.count||(this.count=0),this.state||(this.state={});let o={element:e,event:t,modifiers:i,handler:this,id:++this.count,step:-1,state:this.state,commit:null,current:null,aborted:!1};if(o.current=o,t.handle$mod&&t.handle$mod.apply(o,i.options||[])==!1)return;let l=$t[this.type+"$handle"]||$t[t.type+"$handle"]||t.handle$mod||this.guard;if(!(l&&l.apply(o,i.options||[])==!1)){this.currentEvents||(this.currentEvents=new Set),this.currentEvents.add(o);for(let u=0,a=Object.keys(i),c=a.length,h,d;u<c&&(h=a[u],d=i[h],!o.aborted);u++){if(o.step++,h[0]=="_")continue;h.indexOf("~")>0&&(h=h.split("~")[0]);let S=null,f=[t,o],p,g=null,C,T=!1,v=typeof h=="string";if(h[0]=="$"&&h[1]=="_"&&d[0]instanceof Function)h=d[0],h.passive||(o.commit=!0),f=[t,o].concat(d.slice(1)),g=e;else if(d instanceof Array){f=d.slice(),S=f;for(let _=0,O=wn(f),b=O.length;_<b;_++){let N=O[_];if(typeof N=="string"&&N[0]=="~"&&N[1]=="$"){let R=N.slice(2).split("."),A=o[R.shift()]||t;for(let x=0,V=wn(R),F=V.length;x<F;x++){let D=V[x];A=A?A[D]:void 0}f[_]=A}}}if(typeof h=="string"&&(C=h.match(/^(emit|flag|mod|moved|pin|fit|refit|map|remap|css)-(.+)$/))&&(S||(S=f=[]),f.unshift(C[2]),h=C[1]),h=="trap")t[Sl]=!0,t.stopImmediatePropagation(),t[xl]=!0,t.preventDefault();else if(h=="stop")t[Sl]=!0,t.stopImmediatePropagation();else if(h=="prevent")t[xl]=!0,t.preventDefault();else if(h=="commit")o.commit=!0;else if(h=="once")e.removeEventListener(t.type,this);else{if(h=="options"||h=="silence"||h=="silent")continue;if(h=="emit"){let _=f[0],O=f[1],b=new ye(_,{bubbles:!0,detail:O});b.originalEvent=t;let M=(this[hf]||e).dispatchEvent(b)}else if(typeof h=="string"){h[0]=="!"&&(T=!0,h=h.slice(1));let _="α"+h,O=t[_];O||(O=this.type&&$t[this.type+"$"+h+"$mod"]),O||(O=t[h+"$mod"]||$t[t.type+"$"+h]||$t[h+"$mod"]),O instanceof Function?(h=O,g=o,f=S||[],t[_]&&(g=t,t[et]=o)):h[0]=="_"?(h=h.slice(1),g=this.closure):g=this.getHandlerForMethod(e,h)}}try{h instanceof Function?p=h.apply(g||e,f):g&&(p=g[h].apply(g,f)),p&&p.then instanceof Function&&p!=B.$promise&&(o.commit&&!s&&B.commit(),p=await p)}catch(_){r=_;break}if(T&&p===!0||!T&&p===!1)break;o.value=p}if(ht(o,"end",o),o.commit&&!s&&B.commit(),this.currentEvents.delete(o),this.currentEvents.size==0&&this.emit("idle"),r!=null){if(this.type!="error"){let u=r instanceof Error?r.message:r,a=new ye("error",{detail:u,bubbles:!0,cancelable:!0});a.error=r,a.originalEvent=t;let c=e.dispatchEvent(a);if(a.defaultPrevented)return}throw r}return o}}},kn=Ln;(()=>{Ni(Ln,"EventHandler")})();var Mn=class{on$(t,e,i){let r="on$"+t,s;s=new kn(e,i);let o=e.capture||!1,l=e.passive,u=o;return l&&(u={passive:l,capture:o}),this[r]instanceof Function?s=this[r](e,i,s,u):this.addEventListener(t,s,u),s}on$error(t,e,i,r){var s;return(s=t.options)!=null&&s.length&&(i.guard=function(...o){let l=this.event.error;return!!o.find(function(a){return l instanceof a})}),this.addEventListener("error",i,r),i}},En=Mn;(()=>{Ni(Mn,"Element")})();Pn(E.prototype,En.prototype);var ki=new class{get iosΦ(){let n=globalThis.navigator.platform||"";return!!(n.match(/iPhone|iPod|iPad/)||n=="MacIntel"&&globalThis.navigator.maxTouchPoints>2)}};function Cl(n,t){let e=t;return n instanceof Element?n:typeof n=="string"?n=="this"||n==""?e:n=="up"?e.parentNode:n=="op"?e.offsetParent:e.closest(n)||e.querySelector(n)||globalThis.document.querySelector(n):null}function Pe(n){if(typeof n=="string"){let[t,e,i]=n.match(/^([-+]?[\d\.]+)(%|\w+)$/);return[parseFloat(e),i]}else if(typeof n=="number")return[n]}function Ei(n,t=1){let e=1/t;return Math.round(n*e)/e}function cf(n,t,e){return t>e?Math.max(e,Math.min(t,n)):Math.min(e,Math.max(t,n))}function Rn(n,t,e,i,r=.1){let[s,o]=Pe(e),[l,u]=Pe(i),[a,c]=Pe(r);return o=="%"&&(s=(t-n)*(s/100)),u=="%"&&(l=(t-n)*(l/100)),c=="%"&&(a=(l-s)*(a/100)),function(h,d){let S=(h-n)/(t-n),f=s+(l-s)*S;return r&&(f=Ei(f,a)),d&&(f=cf(f,s,l)),f}}function El(n,t){Object.defineProperty(n,"name",{value:t,configurable:!0})}function df(n,t){let e=Object.getOwnPropertyDescriptors(t);return delete e.constructor,n.extend__ instanceof Function?n.extend__(e,t):Object.defineProperties(n,e),n}var wl=Symbol.for("#capture"),mt=Symbol.for("#step"),mf=Symbol.for("#cancel"),Dn=Symbol.for("#reframe");var Tl=Symbol.for("#mods"),jn=Symbol.for("#dx"),An=Symbol.for("#dy"),kt=Symbol.for("#context"),Pi=Symbol.for("#locked"),Pl=Symbol.for("#teardown"),Ol=Symbol.for("#x"),Nl=Symbol.for("#y"),pf=Symbol.for("#pinTarget");function Il(){return globalThis.imba.uses_events_touch=!0,!0}var kl=null,Kn=class{constructor(t,e,i){this.phase="init",this.events=[],this.originalEvent=t,this.handler=e,this.target=this.currentTarget=i,this[Tl]={}}set event(t){this.events.push(t)}get ctrlKey(){return this.originalEvent.ctrlKey}get altKey(){return this.originalEvent.altKey}get shiftKey(){return this.originalEvent.shiftKey}get metaKey(){return this.originalEvent.metaKey}get isPrimary(){return this.originalEvent.isPrimary}get pointerType(){return this.originalEvent.pointerType}get start(){return this.originalEvent}get originalTarget(){return this.originalEvent.target}get event(){return this.events[this.events.length-1]}get elapsed(){return this.event.timeStamp-this.events[0].timeStamp}get type(){return this.event.type}get pointerId(){return this.originalEvent.pointerId}get pressure(){return this.event.pressure}get clientX(){return this.event.clientX}get clientY(){return this.event.clientY}get offsetX(){return this.event.offsetX}get offsetY(){return this.event.offsetY}get activeΦ(){return this.phase!="ended"}get endedΦ(){return this.phase=="ended"}get dx(){return this[jn]==null?this.event.x-this.start.x:this[jn]}get dy(){return this[An]==null?this.event.y-this.start.y:this[An]}stopImmediatePropagation(){return this.cancelBubble=!0,this.event.stopImmediatePropagation(),this}stopPropagation(){return this.cancelBubble=!0,this.event.stopPropagation(),this}preventDefault(){return this.defaultPrevented=!0,this.event.preventDefault()}emit(t,...e){return ht(this,t,e)}on(t,...e){return bt(this,t,...e)}once(t,...e){return G(this,t,...e)}un(t,...e){return Mt(this,t,...e)}αflag(t,e){let{element:i}=this[kt],r=Date.now(),s=e instanceof E?e:e?i.closest(e):i;return this[mt].setup!=!0&&(this[mt].setup=!0,!0)&&(s.flags.incr(t),G(this,"end",function(){return s.flags.decr(t)})),!0}αlock(){return this[wl](),!0}[wl](){if(this[Pi]!=!0&&(this[Pi]=!0,!0))return this[kt].element.setPointerCapture(this.pointerId)}get[mt](){var t,e;return(t=this[Tl])[e=this[kt].step]||(t[e]={})}[mf](){return this[Pl]()}αmoved(t,e){let i=this[mt],{element:r,state:s,event:o}=this[kt];if(!i.setup){let h=t||4;typeof t=="string"&&t.match(/^(up|down|left|right|x|y)$/)&&(i.dir=t,h=e||4),typeof e=="string"&&e.match(/^(up|down|left|right|x|y)$/)&&(i.dir=e),i.setup=!0;let[d,S]=Pe(h);i.threshold=d,i.sy=d,i.x0=this.x,i.y0=this.y,i.dir||(i.dir="dist"),i.x=i.left=i.right=i.y=i.up=i.down=i.dist=0,S&&S!="px"&&console.warn("only px threshold allowed in @touch.moved")}if(i.active)return!0;if(i.cancelled)return!1;let l=i.threshold,u=this.x-i.x0,a=this.y-i.y0;i.x=Math.max(i.x,Math.abs(u)),i.y=Math.max(i.y,Math.abs(a)),i.left=Math.max(i.left,-u),i.right=Math.max(i.right,u),i.up=Math.max(i.up,-a),i.down=Math.max(i.down,a),i.dist=Math.max(i.dist,Math.sqrt(u*u+a*a));let c=i[i.dir];if(c>l&&c>=i.x&&c>=i.y){i.active=!0;let h=s.pinTarget;return r.flags.incr("@move"),h&&h.flags.incr("@move"),this.preventDefault(),G(this,"end",function(){return h&&h.flags.decr("@move"),r.flags.decr("@move")}),!0}else if(i.x>l||i.y>l)return i.cancelled=!0,!1;return!1}αhold(t=250){var e=this;let i=this[mt],r=this[kt].element;if(i.cancelled)return!1;if(i.setup&&!i.active){let s=this.clientX,o=this.clientY,l=s-i.x,u=o-i.y;Math.sqrt(l*l+u*u)>5&&!i.cancelled&&(clearTimeout(i.timeout),i.cancelled=!0)}if(i.setup!=!0&&(i.setup=!0,!0)){i.active=!1,i.x=this.clientX,i.y=this.clientY;let s;return i.timeout=setTimeout(function(){return i.active=!0,e.preventDefault(),r.flags.incr("@hold"),s&&s(!0),s=null},t),G(this,"end",function(){return i.active&&r.flags.decr("@hold"),clearTimeout(i.timeout),s&&s(!1),s=null}),new Promise(function(o){return s=o})}return i.active}αsync(t,e="x",i="y"){let r=this[mt];return r.setup!=!0&&(r.setup=!0,!0)?(r.x=t[e]||0,r.y=t[i]||0,r.tx=this.x,r.ty=this.y):(e&&(t[e]=r.x+(this.x-r.tx)),i&&(t[i]=r.y+(this.y-r.ty))),this[kt].commit=!0,!0}αapply(t,e="x",i="y"){return e&&(t[e]=this.x),i&&(t[i]=this.y),this[kt].commit=!0,!0}αcss(t="x",e="y"){let i=this[mt];if(i.setup!=!0&&(i.setup=!0,!0))i.el=this[kt].element,i.x=i.el[Ol]||0,i.y=i.el[Nl]||0,i.tx=this.x,i.ty=this.y;else{let r=i.el[Ol]=i.x+(this.x-i.tx),s=i.el[Nl]=i.y+(this.y-i.ty);t&&i.el.style.setProperty("--x",r+"px"),e&&i.el.style.setProperty("--y",s+"px")}return!0}αend(){return this.phase=="ended"}αshift(){return!!this.shiftKey}αalt(){return!!this.altKey}αctrl(){return!!this.ctrlKey}αmeta(){return!!this.metaKey}αprimary(){return!!this.isPrimary&&(this.pointerType!="mouse"||this.originalEvent.button==0)}αmouse(){return this.pointerType=="mouse"}αpen(){return this.pointerType=="pen"}αtouch(){return this.pointerType=="touch"}αpressure(t=.5){return this.pressure>=t}αlog(...t){return console.info(...t),!0}αleft(){return this.originalEvent.button==0}αmiddle(){return this.originalEvent.button==1}αright(){return this.originalEvent.button==2}αround(t=1,e=t){return this.x=Ei(this.x,t),this.y=Ei(this.y,e),!0}[Dn](...t){let e=this[mt];if(e.setup!=!0&&(e.setup=!0,!0)){let i=this.target,r=t.length,s=t[0],o=0,l="100%",u=0,a=typeof s;a=="number"||a=="string"&&/^([-+]?\d[\d\.]*)(%|\w+)$/.test(s)||s instanceof Array?s=null:a=="string"&&(s=="this"||s==""?s=i:s=="up"?s=i.parentNode:s=="op"?s=i.offsetParent:s=i.closest(s)||i.querySelector(s)),s==null&&(r++,t.unshift(s=i)),r==2?u=t[1]:r>2&&([o,l,u=0]=t.slice(1));let c=s.getBoundingClientRect();o instanceof Array||(o=[o,o]),l instanceof Array||(l=[l,l]),u instanceof Array||(u=[u,u]),e.rect=c,e.x=Rn(c.left,c.right,o[0],l[0],u[0]),e.y=Rn(c.top,c.bottom,o[1],l[1],u[1]),this.x0=this.x=e.x(this.x,e.clamp),this.y0=this.y=e.y(this.y,e.clamp)}else{let i=this.x=e.x(this.x,e.clamp),r=this.y=e.y(this.y,e.clamp);this[jn]=i-this.x0,this[An]=r-this.y0}return!0}αfit(...t){return this[mt].clamp=!0,this[Dn](...t)}αreframe(...t){return this[Dn](...t)}αpin(...t){var i;let e=this[mt];if(e.setup!=!0&&(e.setup=!0,!0)){let r=Cl(t[0],this.target);r instanceof E||t.unshift(r=this.target);let s=t[1]||0,o=(i=t[2])!=null?i:t[2]=s,l=r.getBoundingClientRect();e.x=this.clientX-(l.left+l.width*s),e.y=this.clientY-(l.top+l.height*o),r&&(this[pf]=r,r.flags.incr("_touch_"),G(this,"end",function(){return r.flags.decr("_touch_")}))}return this.x-=e.x,this.y-=e.y,!0}},Vn=Kn;(()=>{El(Kn,"Touch")})();var qn=class{on$touch(t,e,i,r){return i.type="touch",this.addEventListener("pointerdown",i,{passive:!1}),ki.iosΦ&&globalThis.parent!=globalThis&&kl!=!0&&(kl=!0,!0)&&globalThis.parent.postMessage("setupTouchFix"),i}},Bn=qn;(()=>{El(qn,"Element")})();df(E.prototype,Bn.prototype);if(globalThis.parent==globalThis&&ki.iosΦ){let n=function(t){if(t.data=="setupTouchFix")return globalThis.addEventListener("touchmove",function(){return!1},{passive:!1}),globalThis.removeEventListener("message",n)};globalThis.addEventListener("message",n)}$t.touch$handle=function(){let n=this.event,t=this.element,e=this.state.pointerId,i=this.modifiers,r=this.handler,s=ki.iosΦ;if(this.current=this.state,e!=null)return e==n.pointerId;if(i.ctrl&&!n.ctrlKey||i.alt&&!n.altKey||i.meta&&!n.metaKey||i.shift&&!n.shiftKey||i.if&&!i.if[0]||i.self&&n.target!=t||i.primary&&!n.isPrimary||i.pen&&n.pointerType!="pen"||i.mouse&&n.pointerType!="mouse"||i.touch&&n.pointerType!="touch"||i.sel&&!n.target.matches(String(i.sel[0])))return;let o=this.state=r.state=this.current=new Vn(n,r,t);e=o.pointerId;let l=function(f){return f.preventDefault(),!1},u=null,a=Symbol(),c=function(f){let p=o.clientX,g=o.clientY,C=f.clientX,T=f.clientY;(o[Pi]||o.defaultPrevented)&&(f.pointerId==o.pointerId||p==C&&g==T)&&(f.preventDefault(),f.stopPropagation()),c&&(globalThis.removeEventListener("click",c,{capture:!0}),c=null)},h=function(f){if(!(o.type=="touchmove"&&f.changedTouches[0].identifier!=e)&&(o.defaultPrevented||o[Pi]))return f.preventDefault()},d=function(f){let p=f.type,g=o.phase;if(f.pointerId&&o.pointerId!=f.pointerId||f[a])return;f[a]=!0;let C=p=="pointerup"||p=="pointercancel";if(f.pressure==0&&f.pointerType=="mouse"&&p=="pointermove"&&o.originalEvent.pressure>0)return u(f);p=="pointercancel"?(o.x=o.clientX,o.y=o.clientY):(o.x=f.clientX,o.y=f.clientY),o.event=f,C&&(o.phase="ended");try{r.handleEvent(o)}catch{}if(g=="init"&&!C&&(o.phase="active"),C&&u)return u(f)},S=!1;return u=function(f){if(!S&&(S=!0,t.flags.decr("_touch_"),o.phase!="ended"&&(o.phase="ended",o.x=o.clientX,o.y=o.clientY,r.handleEvent(o)),o.emit("end"),i.passive||--r.prevents==0&&t.style.removeProperty("touch-action"),r.state={},globalThis.removeEventListener("pointermove",d,{passive:!!i.passive}),globalThis.removeEventListener("pointerup",d),globalThis.removeEventListener("pointercancel",d),setTimeout(function(){if(c&&(globalThis.removeEventListener("click",c,{capture:!0}),c=null),s&&h)return globalThis.removeEventListener("touchend",h),globalThis.removeEventListener("touchmove",h,{passive:!1}),h=null},100),!i.passive))return globalThis.document.removeEventListener("selectstart",l,{capture:!0})},o[Pl]=u,i.passive||(r.prevents||(r.prevents=0),r.prevents++,t.style.setProperty("touch-action","none"),t.offsetWidth),t.flags.incr("_touch_"),globalThis.addEventListener("pointermove",d,{passive:!!i.passive}),globalThis.addEventListener("pointerup",d),globalThis.addEventListener("pointercancel",d),globalThis.addEventListener("click",c,{capture:!0}),s&&!i.passive&&(globalThis.addEventListener("touchend",h),globalThis.addEventListener("touchmove",h,{passive:!1})),i.passive||globalThis.document.addEventListener("selectstart",l,{capture:!0}),d(n),!1};var Jt=typeof Reflect=="object"?Reflect:null,Fl=Jt&&typeof Jt.apply=="function"?Jt.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)},Ii;Jt&&typeof Jt.ownKeys=="function"?Ii=Jt.ownKeys:Object.getOwnPropertySymbols?Ii=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Ii=function(t){return Object.getOwnPropertyNames(t)};function $f(n){console&&console.warn&&console.warn(n)}var Ml=Number.isNaN||function(t){return t!==t};function k(){k.init.call(this)}k.EventEmitter=k;k.prototype._events=void 0;k.prototype._eventsCount=0;k.prototype._maxListeners=void 0;var Ll=10;function Fi(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(k,"defaultMaxListeners",{enumerable:!0,get:function(){return Ll},set:function(n){if(typeof n!="number"||n<0||Ml(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");Ll=n}});k.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};k.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Ml(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Rl(n){return n._maxListeners===void 0?k.defaultMaxListeners:n._maxListeners}k.prototype.getMaxListeners=function(){return Rl(this)};k.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var r=t==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var l=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw l.context=o,l}var u=s[t];if(u===void 0)return!1;if(typeof u=="function")Fl(u,this,e);else for(var a=u.length,c=Bl(u,a),i=0;i<a;++i)Fl(c[i],this,e);return!0};function Dl(n,t,e,i){var r,s,o;if(Fi(e),s=n._events,s===void 0?(s=n._events=Object.create(null),n._eventsCount=0):(s.newListener!==void 0&&(n.emit("newListener",t,e.listener?e.listener:e),s=n._events),o=s[t]),o===void 0)o=s[t]=e,++n._eventsCount;else if(typeof o=="function"?o=s[t]=i?[e,o]:[o,e]:i?o.unshift(e):o.push(e),r=Rl(n),r>0&&o.length>r&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=n,l.type=t,l.count=o.length,$f(l)}return n}k.prototype.addListener=function(t,e){return Dl(this,t,e,!1)};k.prototype.on=k.prototype.addListener;k.prototype.prependListener=function(t,e){return Dl(this,t,e,!0)};function gf(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function jl(n,t,e){var i={fired:!1,wrapFn:void 0,target:n,type:t,listener:e},r=gf.bind(i);return r.listener=e,i.wrapFn=r,r}k.prototype.once=function(t,e){return Fi(e),this.on(t,jl(this,t,e)),this};k.prototype.prependOnceListener=function(t,e){return Fi(e),this.prependListener(t,jl(this,t,e)),this};k.prototype.removeListener=function(t,e){var i,r,s,o,l;if(Fi(e),r=this._events,r===void 0)return this;if(i=r[t],i===void 0)return this;if(i===e||i.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,i.listener||e));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===e||i[o].listener===e){l=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():_f(i,s),i.length===1&&(r[t]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",t,l||e)}return this};k.prototype.off=k.prototype.removeListener;k.prototype.removeAllListeners=function(t){var e,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[t]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=i[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this};function Al(n,t,e){var i=n._events;if(i===void 0)return[];var r=i[t];return r===void 0?[]:typeof r=="function"?e?[r.listener||r]:[r]:e?yf(r):Bl(r,r.length)}k.prototype.listeners=function(t){return Al(this,t,!0)};k.prototype.rawListeners=function(t){return Al(this,t,!1)};k.listenerCount=function(n,t){return typeof n.listenerCount=="function"?n.listenerCount(t):Vl.call(n,t)};k.prototype.listenerCount=Vl;function Vl(n){var t=this._events;if(t!==void 0){var e=t[n];if(typeof e=="function")return 1;if(e!==void 0)return e.length}return 0}k.prototype.eventNames=function(){return this._eventsCount>0?Ii(this._events):[]};function Bl(n,t){for(var e=new Array(t),i=0;i<t;++i)e[i]=n[i];return e}function _f(n,t){for(;t+1<n.length;t++)n[t]=n[t+1];n.pop()}function yf(n){for(var t=new Array(n.length),e=0;e<t.length;++e)t[e]=n[e].listener||n[e];return t}function bf(n,t){Object.defineProperty(n,"name",{value:t,configurable:!0})}var Wn=Symbol.for("#getQueryParam"),Kl=Symbol.for("#setQueryParam");var Hn=Symbol.for("#query");var Zt=class{static parse(t,e){return t instanceof Zt?t:new Zt(t,e)}constructor(t,e){this.router=e,this.parse(t)}parse(t){var i;let e;return t instanceof URL||(t=new URL(t,this.router.origin)),(e=(i=this.router)==null?void 0:i.aliases[t.pathname])&&(t.pathname=e),this.url=t,this}get activeΦ(){return this.router.location==this}reparse(){return this.parse(this.url)}get searchParams(){return this.url.searchParams}search(){let t=this.searchParams?this.searchParams.toString():"";return t?"?"+t:""}update(t){if(t instanceof Object)for(let e=0,i=Object.keys(t),r=i.length,s,o;e<r;e++)s=i[e],o=t[s],this.searchParams.set(s,o);else typeof t=="string"&&this.parse(t);return this}clone(){return new Zt(this.url.href,this.router)}equals(t){return this.toString()==String(t)}get href(){return this.url.href}get path(){return this.url.href.slice(this.url.origin.length)}get pathname(){return this.url.pathname}get query(){return this[Hn]||(this[Hn]=new Proxy({},{get:this[Wn].bind(this),set:this[Kl].bind(this)}))}toString(){return this.href}[Wn](t,e){return this.searchParams.get(e)}[Kl](t,e,i){return this[Wn](t,e)!=i&&(i==null||i==""?this.searchParams.delete(e):this.searchParams.set(e,i),this.activeΦ&&(this.router.history.replaceState({},null,this.url.toString()),this.router.touch())),!0}},Et=Zt;(()=>{bf(Zt,"Location")})();function vf(n,t){Object.defineProperty(n,"name",{value:t,configurable:!0})}var Un=function(){return!0},te=class{constructor(t,e=""){this.store=t||{},this.cache={raw:{},rich:{}},this.ns=e,this.local=t==globalThis.sessionStorage,this.children=new Map}serialize(t,e){return JSON.stringify(t)}deserialize(t,e){return JSON.parse(t)}getItem(t){let e=String(this.ns)+":"+t;if(this.store instanceof te)return this.store.getItem(e);if(this.local&&this.cache.rich[e]!=null)return this.cache.rich[e];let i=this.store.getItem(e);if(i!=null)return this.cache.raw[e]==i?this.cache.rich[e]:(this.cache.raw[e]=i,this.cache.rich[e]=this.deserialize(i,e))}setItem(t,e){var i,r;let s=String(this.ns)+":"+t;if(this.store instanceof te)return this.store.setItem(s,e);let o=this.cache.rich[s],l=typeof e;if(this.local&&(this.cache.rich[s]=e),o!==e||l=="object"){let u=this.store.getItem(s);if(e==null)return this.store.removeItem(s),i=this.cache.rich[s],delete this.cache.rich[s],r=this.cache.raw[s],delete this.cache.raw[s],H();{let a=this.serialize(e,s);if(this.cache.rich[s]=e,this.cache.raw[s]=a,u!=a)return this.store.setItem(s,a),H()}}}get(t,e,i){return this.getItem(e)}set(t,e,i,r){return this.setItem(e,i),!0}apply(t,e,[i]){let r=this.children.get(i);return r||this.children.set(i,r=new Proxy(Un,new te(this,i))),r}deleteProperty(t,e){var i;let r=this.ns+e;return i=this.cache[r],delete this.cache[r],this.store.removeItem(r)}},Li=te;(()=>{vf(te,"Storage")})();var dp=new Proxy(Un,new Li(globalThis.localStorage)),ql=new Proxy(Un,new Li(globalThis.sessionStorage));function Hl(n,t){Object.defineProperty(n,"name",{value:t,configurable:!0})}var Ie=Symbol.for("#states"),Wl=new WeakMap,zn=class{static from(t,e){return e?new this(t,e):null}constructor(t,e,i=!1){Wl.set(this,t),this.path=e.path,this.data=e.data||{},this.index=e.index,this.type=e.type,this.local=i}get history(){return Wl.get(this)}get next(){return this.history.at(this.index+1)}get prev(){return this.history.at(this.index-1)}toJSON(){return{path:this.path,data:this.data,index:this.index,type:this.type}}save(){return this.history.cache[this.index]=this,this}toString(){return""+this.history.id+"|"+this.index}},Fe=zn;(()=>{Hl(zn,"State")})();var Yn=class{constructor(t){this.router=t,this.store=ql("router"),this[Ie]=[],this.cache={},this.index=-1;let e=globalThis.history.state,i;if(typeof e=="string"){let r=e.split("|");this.id=parseInt(r[0]),this.index=parseInt(r[1]),this.cache=this.store(this.id)}else this.id=this.store.id=(this.store.id||0)+1,this.cache=this.store(this.id);this.index==-1&&this.replaceState({initial:!0},null,t.path)}get length(){return this.cache.length}get state(){return this.at(this.index)}get states(){let t=this.length,e=0;for(;e<t;)this.at(e++);return this[Ie]}get currentStates(){return this.states.slice(0,this.length)}get next(){return this.state.next}get prev(){return this.state.prev}slice(t,e=this.length){let i=[];for(;t<e;)i.push(this.at(t++));return i}at(t){var e;if(!(t>=this.length))return(e=this[Ie])[t]||(e[t]=Fe.from(this,this.cache[t]))}buildState(t,e,i=!0){let r={data:t,index:this.index+1,path:e||this.router.path,type:i?"push":"replace"};return new Fe(this,r,!0)}pushState(t,e,i,r=!0){return t instanceof Fe||(t=this.buildState(t,i,r)),this.index=t.index,this.cache[this.index]=t,this[Ie][this.index]=t,this[Ie].length=this.cache.length=Math.max(t.index+1,0),globalThis.history[r?"pushState":"replaceState"](String(t),e||null,t.path),this}replaceState(t,e,i){return this.pushState(t,e,i,!1)}},Mi=Yn;(()=>{Hl(Yn,"History")})();function Sf(n,t){Object.defineProperty(n,"name",{value:t,configurable:!0})}var Xn=class{constructor(t,e,i,r){this.params=r,this.router=t,e&&(this.location=Et.parse(e),this.original=this.location.clone()),this.referrer=i}get apply(){return this.params.apply||[]}get revert(){return this.params.revert||[]}get state(){return this.params.state}get mode(){return this.params.mode}redirect(t){var e,i;return(i=(e=this.location)==null?void 0:e.update)==null||i.call(e,t),this}get path(){var t;return(t=this.location)==null?void 0:t.path}get url(){var t,e;return(e=(t=this.location)==null?void 0:t.toString)==null?void 0:e.call(t)}set path(t){this.location.path=t}abort(t=!1){return this.aborted=!0,t&&(this.forceAbort=t),this}match(t){return this.location?this.router.route(t).match(this.path):null}},Le=Xn;(()=>{Sf(Xn,"Request")})();function is(n,t){Object.defineProperty(n,"name",{value:t,configurable:!0})}function Ul(n){let t;return n&&((t=n.toIterable)?t.call(n):n)}var Ri=Symbol.for("#routes"),Gn=Symbol.for("#match"),xf=Symbol.for("#symbol"),zl=Symbol.for("#matches"),Qn=new Map,Jn={},Zn={},Cf=/.*/;function wf(n){if(!Qn.has(n)){let t=new Map;return Qn.set(n,t),t}return Qn.get(n)}function Tf(n,t){let e=wf(n);if(!e.has(t)){let i=Object.create(n);return Object.assign(i,t),e.set(t,i),i}return e.get(t)}var rs=class{},ts=rs;(()=>{is(rs,"Match")})();function Of(n){if(Jn[n])return Jn[n];let t=Jn[n]={url:n},e=n.indexOf("?"),i=n.indexOf("#");if(i>=0&&(t.hash=n.slice(i+1),n=t.url=n.slice(0,i)),e>=0){let r=t.query=n.slice(e+1);n=n.slice(0,e),t.query=Zn[r]||(Zn[r]=new URLSearchParams(r))}return t.path=n,t}var ns=class{constructor(t){this.router=t,this.fullPath="",this[Ri]={},this[Gn]=new ts,this[Gn].path=""}route(t){var e;return(e=this[Ri])[t]||(e[t]=new es(this.router,t,this))}match(){return this[Gn]}resolve(t){return"/"}},Di=ns;(()=>{is(ns,"RootRoute")})();var ji=class{constructor(t,e,i){this.parent=i||t.rootRoute,this.router=t,this.status=200,this.path=e,this[xf]=Symbol(),this[zl]={},this[Ri]={}}route(t){var e;return(e=this[Ri])[t]||(e[t]=new ji(this.router,t,this))}get fullPath(){return""+this.parent.fullPath+"/"+this.$path}load(t){return this.router.queue.add(t)}set path(t){var e=this;if(this.$path==t)return;if(this.raw=t,this.$path=t,this.groups=[],this.cache={},this.dynamic=!1,t.indexOf("?")>=0){let r=t.split("?");t=r.shift(),this.query={};for(let s=0,o=Ul(r.join("?").split("&")),l=o.length;s<l;s++){let u=o[s];if(!u)continue;let[a,c]=u.split("=");a[0]=="!"&&(this.dynamic=!0,a=a.slice(1),c=!1),c===""&&(c=!1),c&&c[0]==":"&&(this.dynamic=!0),this.query[a]=c||c!==!1}}if(t=t.replace(/\:(\w+|\*)(\.)?/g,function(r,s,o){e.dynamic=!0,s!="*"&&e.groups.push(s);let l=e.router.matchers[s]||(o?"([^/#.?]+)":"([^/#?]+)");return o?""+l+".":l}),t==""&&this.query)return;if(t=="*")return this.regex=Cf,this;t="^"+t;let i=t[t.length-1];(i=="$"||i=="/")&&(t=t.slice(0,-1)+"(?=/?[#?]|/?$)"),i!="/"&&i!="$"&&t!="^/"&&(t=t+"(?=[/#?]|$)"),this.regex=new RegExp(t)}match(t=this.router.path){var l,u,a;let e,i=this.parent.match(t);if(!i)return null;let r=Of(t),s=r.url,o="";if(i.path&&r.path.indexOf(i.path)==0&&(o=i.path+"/",s=s.slice(o.length)),e=this.regex?s.match(this.regex):[""]){let c=o+e[0],h=[this.$path],d={};if(this.groups.length)for(let p=0,g=Ul(e),C=g.length,T;p<C;p++){let v=g[p];(T=this.groups[p-1])&&(d[T]=v,h.push(v))}if(this.query)for(let p=this.query,g=0,C=Object.keys(p),T=C.length,v,_;g<T;g++){v=C[g],_=p[v];let O=v,b=(u=(l=r.query)==null?void 0:l.get)==null?void 0:u.call(l,v);if(_===!1){if(b)return null;h.push("1");continue}if(_[0]==":"&&(O=_.slice(1),_=!0),_==!0&&b||_==b)d[O]=b,h.push(b);else return null}let S=h.join("*");d=(a=this[zl])[S]||(a[S]=d);let f=Tf(i,d);return f.path=c,f}return null}resolve(t=this.router.path){if(this.raw[0]=="/"&&!this.dynamic)return this.raw.replace(/\$/g,"");let e=this.parent.match(t),i=this.parent.resolve(t),r;if(this.dynamic){let s=this.match(t);return s?s.path:null}return this.raw[0]=="?"?r=(i||"/")+this.raw:r=i+"/"+this.raw,r.replace(/\$/g,"").replace(/\/\/+/g,"/")}},es=ji;(()=>{is(ji,"Route")})();function Nf(n,t){Object.defineProperty(n,"name",{value:t,configurable:!0})}function kf(n){var t,e;(e=(t=Object.getPrototypeOf(n.prototype).constructor)==null?void 0:t.inherited)==null||e.call(t,n)}var Yl=Symbol.for("#__initor__"),Xl=Symbol.for("#__inited__"),Gl=Symbol.for("#__hooks__"),Me=Symbol.for("#idler"),Re=Symbol.for("#resolve"),Ql=Symbol(),De=class extends Set{constructor(){super(),this[Me]=Promise.resolve(this),this[Yl]===Ql&&(this[Gl]&&this[Gl].inited(this),this[Xl]&&this[Xl]())}emit(t,...e){return ht(this,t,e)}on(t,...e){return bt(this,t,...e)}once(t,...e){return G(this,t,...e)}un(t,...e){return Mt(this,t,...e)}add(t){var e=this;if(t instanceof Function&&(t=t()),!this.has(t)){t.then(function(){return e.delete(t)});let i=this.size==0;super.add(t),i&&(this[Me]=this[Re]=null,this.emit("busy",this))}return t}delete(t){return super.delete(t)?(this.size==0&&(this[Re]&&(this[Re](this),this[Re]=null),this.emit("idle",this)),!0):!1}get idle(){var t=this;return this[Me]||(this[Me]=new Promise(function(e){return t[Re]=e}))}},Ai=De;(()=>{De.prototype[Yl]=Ql,Nf(De,"Queue"),kf(De)})();function ie(n,t){Object.defineProperty(n,"name",{value:t,configurable:!0})}function ps(n,t){let e=Object.getOwnPropertyDescriptors(t);return delete e.constructor,n.extend__ instanceof Function?n.extend__(e,t):Object.defineProperties(n,e),n}function au(n){var t,e;(e=(t=Object.getPrototypeOf(n.prototype).constructor)==null?void 0:t.inherited)==null||e.call(t,n)}var Jl=Symbol.for("#__initor__"),Zl=Symbol.for("#__inited__"),tu=Symbol.for("#__hooks__"),us=Symbol.for("#enter"),as=Symbol.for("#resolved"),Vi=Symbol.for("#leave"),eu=Symbol.for("#afterVisitRouted"),iu=Symbol.for("#afterVisitRouteTo"),ss=Symbol.for("#router"),ee=Symbol.for("#doc"),yt=Symbol.for("#version"),Ef=Symbol.for("#routes"),os=Symbol.for("#origin"),ls=Symbol.for("#request"),je=Symbol.for("#hash"),ot=Symbol.for("#routeTo"),Ae=Symbol.for("#path"),pt=Symbol.for("#match"),Be=Symbol.for("#options"),Pf=Symbol.for("#cache"),ru=Symbol.for("#unmatched"),It=Symbol.for("#active"),If=Symbol.for("#resolvedPath"),Ff=Symbol.for("#dataKey"),Lf=Symbol.for("#activeKey"),Ke=Symbol.for("#urlKey"),Pt=Symbol.for("#dataMap"),Ve=Symbol.for("#href"),Q=Symbol.for("#route"),nu=Symbol.for("#context"),su=Symbol.for("#afterVisit"),ou=Symbol.for("#routeHandler"),Mf=Symbol.for("#parentNode"),Rf=Symbol.for("#visitContext"),lu=Symbol.for("##visitContext"),Df=Symbol.for("#attachToParent"),jf=Symbol.for("#detachFromParent"),uu=Symbol();var $s=class{get router(){return this[ss]||(this[ss]=new cs(this))}},hs=$s;(()=>{ie($s,"Document")})();ps(Er.prototype,hs.prototype);function hu(){return globalThis.imba.use_router=!0,!0}var Rp=zs(function(){return globalThis.document.router}),qe=class extends k{constructor(t,e={}){super(),this[ee]=t,this[yt]=0,this[Ef]={},this.aliases={},this.redirects={},this.rules={},this.matchers={},this.options=e,this.busy=[],this.queue=new Ai,this.root=new Di(this),this.location=new Et(e.url||t.location.href,this),this.history=new Mi(this),this.mode=e.mode||"history",this.queue.on("busy",function(){return globalThis.document.flags.incr("_routing_")}),this.queue.on("idle",function(){return globalThis.document.flags.decr("_routing_"),H()}),this.setup(),this[Jl]===uu&&(this[tu]&&this[tu].inited(this),this[Zl]&&this[Zl]())}get origin(){return this[os]||(this[os]=this[ee].location.origin)}get query(){return this.location.query}init(){return this.refresh({mode:"replace"}),this}alias(t,e){return this.aliases[t]=e,this.location.reparse(),this}touch(){return this[yt]++}option(t,e){return e==null?this.options[t]:(this.options[t]=e,this)}get realpath(){let t=this[ee].location;return t.href.slice(t.origin.length)}get state(){return this.history.state}get states(){return this.history.currentStates}set state(t){this.state.data=t,this.state.save()}get ctx(){return this[ls]}pushState(t,e,i){return this.history.pushState(t,e||null,String(i))}replaceState(t,e,i){return this.history.replaceState(t,e||null,String(i))}refresh(t={}){var e=this;if(this.refreshing)return;this.refreshing=!0;let i=this.location,r=Et.parse(t.location||this.realpath,this),s=t.mode,o=this[ls];if(!r.equals(i)||!o||t.state){let l=new Le(this,r,i,t);this[ls]=l,this.emit("beforechange",l),l.aborted&&(!l.forceAbort&&globalThis.window.confirm("Are you sure you want to leave? You might have unsaved changes")?l.aborted=!1:s=="pop"?this.pushState(this.state,null,String(i)):s=="replace"&&this.replaceState(this.state,null,String(i))),l.aborted||(this.location=l.location,s=="push"?this.pushState(l.state,null,String(this.location)):s=="replace"?this.replaceState(l.state,null,String(this.location)):s=="pop"&&(this.history.index=t.index),this.emit("change",l),this.touch(),H())}return B.add(function(){let l=e[ee].location.hash;if(l!=e[je])return e.emit("hashchange",e[je]=l)}),this.refreshing=!1,this}onpopstate(t){let e=this.history.index,i=e,r={pop:!0,index:0,from:e,mode:"pop"};try{if(typeof t.state=="string"){let[s,o]=t.state.split("|");i=r.index=parseInt(o),i<e?r.revert=this.history.slice(i+1,e+1).reverse():i>e&&(r.apply=this.history.slice(e+1,i+1))}}catch{}return this.refresh(r),this}onbeforeunload(t){let e=new Le(this,null,this.location,{mode:"unload"});if(this.emit("beforechange",e),e.aborted)return!0}onhashchange(t){return this.emit("hashchange",this[je]=this[ee].location.hash),H()}setup(){this.onclick=this.onclick.bind(this),this.onhashchange=this.onhashchange.bind(this);let t=globalThis.window;return this[je]=this[ee].location.hash,this.location=Et.parse(this.realpath,this),t.onpopstate=this.onpopstate.bind(this),t.onbeforeunload=this.onbeforeunload.bind(this),t.addEventListener("hashchange",this.onhashchange),t.addEventListener("click",this.onclick,{capture:!0}),t.document.documentElement.emit("routerinit",this),this.refresh,this}onclick(t){if(t.metaKey||t.altKey)return;let e=null,i=null,r=t.target;for(;r&&(!e||!i);)!e&&r.nodeName=="A"&&(e=r),!i&&r[ot]&&(i=r),r=r.parentNode;if(e&&i!=e&&(!i||i.contains(e))){let s=e.getAttribute("href");s&&!s.match(/\:\/\//)&&(!e.getAttribute("target")||e.getAttribute("target")=="_self")&&!e.classList.contains("external")&&e.addEventListener("click",this.onclicklink.bind(this),{once:!0})}return!0}onclicklink(t){let e=t.currentTarget||t.target;e[ot]&&e[ot].resolve();let i=e.getAttribute("href"),r=new URL(e.href),s=r.href.slice(r.origin.length),o=this.realpath.split("#")[0],l=s.split("#")[0];return o==l?globalThis.document.location.hash=r.hash:e[ot]?e[ot].go():this.go(s),t.stopPropagation(),t.preventDefault()}get url(){return this.location.url}get path(){let t=this.location.path;return this.aliases[t]||t}get pathname(){return this.location.pathname}serializeParams(t){var e;if(t instanceof Object){e=[];for(let r=0,s=Object.keys(t),o=s.length,l,u;r<o;r++)l=s[r],u=t[l],e.push([l,globalThis.encodeURI(u)].join("="));return e.join("&")}return t||""}get hash(){return this[je]}set hash(t){this.history.replaceState(this.state,null,"#"+this.serializeParams(t))}match(t){return this.route(t).match(this.path)}route(t){return this.root.route(t)}go(t,e=null){if(typeof t=="object"&&e===null&&(e=t,t=this.path),typeof t=="number")return globalThis.history.go(t),this;let i=this.location.clone().update(t),r=this.history.buildState(e,i.path,!0);return this.refresh({push:!0,mode:"push",location:i,state:r,apply:[r]}),this}replace(t,e=null){typeof t=="object"&&e===null&&(e=t,t=this.path);let i=this.location.clone().update(t),r=this.history.buildState(e,i.path,!1);return this.refresh({replace:!0,mode:"replace",location:i,state:r,apply:[r]})}},cs=qe;(()=>{qe.prototype[Jl]=uu,ie(qe,"Router"),au(qe)})();var gs=class{constructor(t,e,i,r={}){this.parent=i,this.node=t,this[Ae]=e,this[pt]=null,this[Be]=r,this[Pf]={},this[ru]={},this[It]=null,this[If]=null,this[Ff]=Symbol(),this[Lf]=Symbol(),this[Ke]=Symbol()}get router(){return this.node.ownerDocument.router}get route(){return(this.parent?this.parent.route:this.router).route(this[Ae])}get match(){return this[pt]}get params(){return this[pt]||this[ru]}get state(){let t=this[Pt]||(this[Pt]=new Map),e=this.params,i=this[Pt].get(e);return i||this[Pt].set(e,i={}),i}set state(t){(this[Pt]||(this[Pt]=new Map)).set(this.params,t)}set path(t){this[Ae]!=t&&(this[Ae]=t,!0)&&this.router.touch()}get path(){return this[Ae]}get isActive(){return!!this[It]}get activeΦ(){return!!this[It]}resolve(){let t=this.router[yt];if(!(this[yt]!=t&&(this[yt]=t,!0)))return;let e=this.route,i=this[Be],r=this.router.path,s=e.match(r),o=this[It],l=this[pt],u=s!=l,a=s&&s[this[Ke]];return s&&(this[It]=!0,this[pt]=s,s[this[Ke]]=r),s&&(u||a!=r||!o)&&this[as](s,l,a),!o&&s&&this[us](),!s&&(o||o===null)&&(this[It]=!1,this[Vi]()),this[pt]}[us](){var t,e;return this.node.flags.remove("not-routed"),this.node.flags.add("routed"),(e=(t=this.node)==null?void 0:t.routeDidEnter)==null?void 0:e.call(t,this)}[as](t,e,i=""){var r,s;return(s=(r=this.node)==null?void 0:r.routeDidResolve)==null?void 0:s.call(r,this,t,e,i)}[Vi](){var t,e;return this.node.flags.add("not-routed"),this.node.flags.remove("routed"),(e=(t=this.node)==null?void 0:t.routeDidLeave)==null?void 0:e.call(t,this)}},Bi=gs;(()=>{ie(gs,"ElementRoute")})();var Ki=class extends Bi{[us](){return this}[as](){return this}[Vi](){return this}resolve(){let t=this.router[yt];if(!(this[yt]!=t&&(this[yt]=t,!0)))return;let e=this[Be],i=this.route,r=this.router.path,s=this.route.resolve(r),o=this.route.match(r);o&&(this[pt]=o,this[pt][this[Ke]]=r),e.sticky&&this[pt]&&(s=this[pt][this[Ke]]),this[Ve]!=s&&(this[Ve]=s,!0)&&this.node.nodeName=="A"&&this.node.setAttribute("href",s),this.node.flags.toggle("active",!!o)}get url(){return this.resolve(),globalThis.location.origin+this[Ve]}go(){return this.resolve(),this[Be]&&this[Be].replace?this.router.replace(this[Ve]):this.router.go(this[Ve])}},fs=Ki;(()=>{ie(Ki,"ElementRouteTo"),au(Ki)})();var _s=class{get router(){return this.ownerDocument.router}},ds=_s;(()=>{ie(_s,"Node")})();ps(gt.prototype,ds.prototype);var ys=class{set route(t){if(this[Q]){this[Q].path=t;return}let e=t[0]!="/"?this[nu].route:null;this[Q]=new Bi(this,t,e,this.route__),this[su]=this[eu]}get route(){return this[Q]}set routeΞto(t){var e=this;if(this[ot]){this[ot].path=t;return}let i=t[0]!="/"?this[nu].route:null;this[Q]=this[ot]=new fs(this,t,i,this.routeTo__),this[su]=this[iu],this.onclick=function(r){if(!r.altKey&&!r.metaKey&&!r[ou])return r.preventDefault(),r[ou]=e[ot],e[ot].go()}}[eu](){if(this[Q]){let t=this[Mf],e=t&&t[Rf];if(e&&e.matchedRoute&&e.matchedRoute!=this[Q]){this[Q][It]!=!1&&(this[Q][It]=!1,!0)&&(this[Q][Vi](),this[Q][yt]=-1);return}if(this[Q].resolve(),this[Q].activeΦ)e.matchedRoute=this[Q];else return}if(this.visit&&this.visit(),this[lu])return this[lu]=null}[iu](){if(this[ot]&&this[ot].resolve(),this.visit)return this.visit()}routeDidEnter(t){return this[Df]()}routeDidLeave(t){return this[jf]()}routeDidResolve(t,e,i){var r=this;this.routed instanceof Function&&e!=i&&this.router.queue.add(async function(){r.suspend();let s=await r.routed(e,t.state,i);return r.unsuspend()})}},ms=ys;(()=>{ie(ys,"Element")})();ps(E.prototype,ms.prototype);function At(n){return new Promise((t,e)=>{n.oncomplete=n.onsuccess=()=>t(n.result),n.onabort=n.onerror=()=>e(n.error)})}function Af(n,t){let e=indexedDB.open(n);e.onupgradeneeded=()=>e.result.createObjectStore(t);let i=At(e);return(r,s)=>i.then(o=>s(o.transaction(t,r).objectStore(t)))}var bs;function qi(){return bs||(bs=Af("keyval-store","keyval")),bs}function cu(n,t=qi()){return t("readonly",e=>At(e.get(n)))}function Wi(n,t,e=qi()){return e("readwrite",i=>(i.put(t,n),At(i.transaction)))}function fu(n,t=qi()){return t("readwrite",e=>(n.forEach(i=>e.put(i[1],i[0])),At(e.transaction)))}function Vf(n,t){return n.openCursor().onsuccess=function(){!this.result||(t(this.result),this.result.continue())},At(n.transaction)}function du(n=qi()){return n("readonly",t=>{if(t.getAll&&t.getAllKeys)return Promise.all([At(t.getAllKeys()),At(t.getAll())]).then(([i,r])=>i.map((s,o)=>[s,r[o]]));let e=[];return n("readonly",i=>Vf(i,r=>e.push([r.key,r.value])).then(()=>e))})}async function Kf(){let n=await cu("activeWeek"),t=await du(),e=t.filter(function([[s]]){return s==="column"}).map(function([s,o]){return o}),i=t.filter(function([[s]]){return s==="card"}).map(function([s,o]){return o});return{activeWeek:n,columns:e,cards:i}}function qf(n){return Wi(["card",n.id],n)}function Wf(n){return Wi(["column",n.id],n)}function Hf(n){return fu(n.map(function(t){return[["column",t.id],t]}))}function Uf(n){return Wi("activeWeek",n)}var zf={loadContent:Kf,saveCard:qf,saveColumn:Wf,saveManyColumns:Hf,saveActiveWeek:Uf},it=zf;function Yf(n){let t;return n&&((t=n.toIterable)?t.call(n):n)}function Xf(n,t){Object.defineProperty(n,"name",{value:t,configurable:!0})}var mu=Symbol.for("#__init__"),Gf=Symbol.for("#__patch__");function Qf(){return(Math.random()+1).toString(36).substring(6)}function Jf(){let n=new Date,t=n.getFullYear(),e=new Date(t,0,1),i=Math.ceil(((n.getTime()-e.getTime())/864e5+e.getDay()+1)/7);return""+t+"-"+i}function Zf(n,t){return[{id:"1000",title:"Sunday",index:0,limit:3,status:"open",week:n,toFill:!0,canAdd:!0,canMoveOut:!0,color:"sky1"},{id:"2000",title:"Monday",index:1,limit:3,status:"open",week:n,toFill:!0,canAdd:!0,canMoveOut:!0,color:"sky1"},{id:"3000",title:"Tuesday",index:2,limit:3,status:"open",week:n,toFill:!0,canAdd:!0,canMoveOut:!0,color:"sky1"},{id:"4000",title:"Wednesday",index:3,limit:3,status:"open",week:n,toFill:!0,canAdd:!0,canMoveOut:!0,color:"sky1"},{id:"5000",title:"Thursday",index:4,limit:3,status:"open",week:n,toFill:!0,canAdd:!0,canMoveOut:!0,color:"sky1"},{id:"6000",title:"Friday",index:5,limit:3,status:"open",week:n,toFill:!0,canAdd:!0,canMoveOut:!0,color:"sky1"},{id:"7000",title:"Saturday",index:6,limit:3,status:"open",week:n,toFill:!0,canAdd:!0,canMoveOut:!0,color:"sky1"},{id:"8000",title:"Next week",index:7,limit:7,status:"open",week:n,toFill:!0,canAdd:!0,canMoveOut:!0,color:"lime1"},{id:"9000",title:"Gave up",index:8,limit:5,status:"open",week:n,toFill:!1,canAdd:!1,canMoveOut:!1,color:"purple1"}].map(function(e){return e.id=String(parseInt(e.id)+t+1),e})}var Ss=class{[Gf](t={},e=!0){var i;(i=t.content)!==void 0&&(this.content=i),(i=t.draggingCardId)!==void 0&&(this.draggingCardId=i),(i=t.hoveringCardId)!==void 0&&(this.hoveringCardId=i),(i=t.dropIndex)!==void 0&&(this.dropIndex=i),(i=t.cardsToFinish)!==void 0&&(this.cardsToFinish=i)}constructor(t=null){this[mu](t)}[mu](t=null,e=!0,i=!0){var r;this.content=t?t.content:void 0,this.draggingCardId=t&&(r=t.draggingCardId)!==void 0?r:null,this.hoveringCardId=t&&(r=t.hoveringCardId)!==void 0?r:null,this.dropIndex=t&&(r=t.dropIndex)!==void 0?r:null,this.cardsToFinish=t&&(r=t.cardsToFinish)!==void 0?r:[]}async init(){return this.content=await it.loadContent()}addCard(t,e){if(this.isFullColumn(e))return;let r={index:this.getLastColumnIndex(e)+1,title:t,columnId:e,id:Qf(),status:"pending"};return this.content.cards.push(r),it.saveCard(r)}moveCard(t,e){if(this.isFullColumn(e)&&t.columnId!==e)return;let i=this.getColumnData(e);return t.columnId=e,t.index=this.dropIndex||this.getLastColumnIndex(e)+1,i.index===8&&(t.status="missed"),it.saveCard(t)}upCard(t){return t.index-=1,it.saveCard(t)}downCard(t){return t.index+=1,it.saveCard(t)}completeCard(t){return t.status="done",it.saveCard(t)}get draggingCardΦ(){return this.draggingCardId!==null}get hoveringCardΦ(){return this.hoveringCardId!==null}get draggingCard(){var t=this;return this.content.cards.find(function(e){return e.id===t.draggingCardId})}get hoveringCard(){var t=this;return this.content.cards.find(function(e){return e.id===t.hoveringCardId})}get availableColumns(){var t=this;return this.content.columns.filter(function(e){return e.status!=="closed"&&!t.isFullColumn(e.id)})}getColumnCards(t){return this.content.cards.filter(function(i){return i.columnId===t}).sort(function(i,r){return i.index-r.index})}getColumnData(t){return this.content.columns.find(function(e){return e.id===t})}getColumnLength(t){return this.content.cards.reduce(function(e,i){return i.columnId===t?++e:e},0)}getLastColumnIndex(t){return Math.max(0,...this.getColumnCards(t).map(function(e){return e.index}))}isFullColumn(t){let e=this.getColumnData(t);return this.getColumnLength(t)===e.limit}getColumnSnapshot(t){let e=this.getColumnCards(t),i={done:0,pending:0,missed:0};return e.reduce(function(r,s){return{...r,[s.status]:++r[s.status]}},i)}getColumnSummary(t){let e=this.getColumnData(t),i=this.getColumnSnapshot(t),r=this.getColumnLength(t);return r===0?"empty":i.done===r?"completed":i.done/r>=.5?"almost":i.done/r>=.2?"far":"none"}findTodayColumn(t,e){return this.content.columns.find(function(i){return i.index===t&&i.week===e})}distributeNextWeekColumn(t,e,i){var r;let s=this.content.cards.filter(function(c){return c.columnId===t.id});s.forEach(function(c){if(c.status!=="moved")return c.status="moved",it.saveCard(c)});let o=[...s].sort(function(c,h){return c.index-h.index}),l=this.content.columns.filter(function(c){return c.week===i&&c.index>=e&&c.index<=6}),u=l.map(function(c){return[c.limit,c.id]}),a=this.content.columns.find(function(c){return c.week===i&&c.index===7});r=[];for(let c=0,h=Yf(o),d=h.length;c<d;c++){let S=h[c],f=u.find(function(p,g){return p[0]>0&&g>=c%l.length});f&&f[0]--,r.push(this.addCard(S.title,f?f[1]:a.id))}return r}startWeek(t,e){var u,a,c;var i=this;let r=this.content.columns.filter(function(h){return h.week===i.content.activeWeek}),s=parseInt((c=(a=(u=r[0])==null?void 0:u.id)==null?void 0:a.slice)==null?void 0:c.call(a,1)),o=Zf(e,s||0);this.content.activeWeek=e,it.saveActiveWeek(e),this.content.columns.push(...o),it.saveManyColumns(o);let l=r.find(function(h){return h.index===7});if(l)return this.distributeNextWeekColumn(l,t,e)}checkHistory(){let t=Jf(),e=new Date().getDay(),i=this.findTodayColumn(e,t);i||(this.startWeek(e,t),i=this.findTodayColumn(e,t)),i.status==="open"&&(i.status="current",it.saveColumn(i));let r=this.content.columns.filter(function(o){return o.index<e||o.week<t});r.forEach(function(o){if(o.status!=="closed")return o.status="closed",it.saveColumn(o)});let s=r.filter(function(o){return o.index<=6}).map(function(o){return o.id});return this.cardsToFinish=this.content.cards.filter(function(o){return o.status==="pending"&&s.includes(o.columnId)}),this.cardsToFinish.sort(function(o,l){return parseInt(o.columnId)-parseInt(l.columnId)})}finishCard(t,e){return t.status=e?"done":"missed",it.saveCard(t),this.cardsToFinish=this.cardsToFinish.filter(function(i){return i.id!==t.id})}},vs=Ss;(()=>{Xf(Ss,"State")})();var td=new vs,m=td;function ed(n){let t;return n&&((t=n.toIterable)?t.call(n):n)}function id(n,t){Object.defineProperty(n,"name",{value:t,configurable:!0})}dt(),Qt(),Nt(),Si(),Il(),fi();var pu=Symbol.for("#__init__"),rd=Symbol.for("#__patch__"),nd=Symbol.for("#beforeReconcile"),Vt=Symbol.for("##up"),sd=Symbol.for("#getSlot"),We=Symbol.for("#placeChild"),xs=Symbol.for("#afterVisit"),$u=Symbol.for("#appendChild"),od=Symbol.for("#afterReconcile"),gu=Symbol(),_u=Symbol(),yu=Symbol(),bu=Symbol(),vu=Symbol(),Su=Symbol(),xu=Symbol(),Cu=Symbol(),wu=Symbol(),Tu=Symbol(),Ou=Symbol(),Nu=Symbol(),ku=Symbol(),Eu=Symbol(),Pu=Symbol(),Iu=Symbol(),Fu=Symbol(),Lu=Symbol(),Mu=Symbol(),Ru=Symbol(),Du=Symbol(),ju=Symbol();var Cs=Symbol(),Au=Symbol(),Vu=Symbol(),Bu=Symbol(),Ku=Symbol(),qu=Symbol(),Wu=Symbol(),Hu=Symbol(),Uu=Symbol(),ws=class extends K{get $dialog(){let t=Y("dialog",null,`${this._ns_||""} $dialog`,null);return Object.defineProperty(this,"$dialog",{value:t}),t}get $openBtn(){let t=$("button",null,`open ${this._ns_||""} $openBtn`,"❯");return Object.defineProperty(this,"$openBtn",{value:t}),t}[rd](t={},e=!0){var i;(i=t.card)!==void 0&&(this.card=i),(i=t.toColumnId)!==void 0&&(this.toColumnId=i)}[pu](t=null,e=!0,i=!0){var r;super[pu](...arguments),this.card=t?t.card:void 0,this.toColumnId=t&&(r=t.toColumnId)!==void 0?r:null}get otherAvailableColumns(){var t=this;return m.availableColumns.filter(function(e){return e.id!==t.card.columnId})}get forTodayΦ(){return m.getColumnData(this.card.columnId).status==="current"}open(){return this.$dialog.showModal()}close(){return this.$dialog.close(),this.$openBtn.blur(),this.toColumnId=null}move(){if(this.toColumnId)return m.moveCard(this.card,this.toColumnId),this.close()}done(){return m.completeCard(this.card),this.close()}render(){var t=this,e,i,r,s,o,l,u,a,c,h,d=this._ns_||"",S,f,p,g,C,T,v,_,O,b,N,M,R,A,x,V,F,D,y,q,U,P,z,L,I,j,ut,Ft,X,W,rt,at,ft,Qi,Vs,ze,Bs,Ji,Zi,Ks,Ye,Th,Kt,Xe,qs,tr;if(s=this,s[nd](),o=l=1,s[gu]===1||(o=l=0,s[gu]=1),a=c=1,(u=s[_u])||(a=c=0,s[_u]=(u=this.$dialog,u[Vt]=s,u)),h=u[sd]("__",s),a||u.on$("keydown",{esc:!0,prevent:!0,$_:[function(J,Lt){return t.close(J)}]},this),a||(S=$("div",h,`container ${d}`,null)),a||(f=$("div",S,`row ${d}`,null)),(p=s[yu])||(s[yu]=p=$("h3",f,`${d}`,null)),g=this.card.title,g===s[vu]&&a||(s[bu]=p[We](s[vu]=g,384,s[bu])),T=v=1,(C=s[Su])||(T=v=0,s[Su]=C=$("button",f,`close ${d}`,"✖")),_=s[xu]||(s[xu]={$_:[function(J,Lt,he){return t.close(J)},null]}),_.$_[1]=t,T||C.on$("click",_,this),a||(O=$("span",S,`di-am ${d}`,"Available columns:")),(b=s[Cu])||(s[Cu]=b=$("div",S,`%group ${d}`,null)),M=R=1,(N=s[wu])||(M=R=0,s[wu]=N=$("form",b,`container ${d}`,null)),A=s[Tu]||(s[Tu]={prevent:!0,$_:[function(J,Lt,he){return t.move(J)},null]}),A.$_[1]=t,M||N.on$("submit",A,this),e=null,this.otherAvailableColumns.length===0)x=V=1,(e=s[Ou])||(x=V=0,s[Ou]=e=$("span",null,`${d}`,"There is no one :(")),x||(e[Vt]=N);else{(e=s[Nu])||(s[Nu]=e=Se(0,null)),e[Vt]=N,F=0,D=e.$;for(let J=0,Lt=ed(this.otherAvailableColumns),he=Lt.length;J<he;J++){let Ge=Lt[J];q=U=1,(y=D[F])||(q=U=0,D[F]=y=$("div",e,`line ${d}`,null)),q||(y[Vt]=e),z=L=1,(P=y[ku])||(z=L=0,y[ku]=P=$("input",y,`${d}`,null)),I=Ge.id+this.card.id,I===y[Eu]||(P.id=y[Eu]=I),z||(P.type="radio"),z||(P.name="column"),I=Ge.id,I===y[Pu]||(P.richValue=y[Pu]=I),I=y[Iu]||(y[Iu]=P.bind$("data",[this,"toColumnId"])),z||!P.setup||P.setup(L),P[xs](L),ut=Ft=1,(j=y[Fu])||(ut=Ft=0,y[Fu]=j=$("label",y,`${d}`,null)),X=Ge.id+this.card.id,X===y[Lu]||(j.htmlFor=y[Lu]=X),X=Ge.title,X===y[Ru]&&ut||(y[Mu]=j[We](y[Ru]=X,384,y[Mu])),F++}e[xs](F)}return s[Du]=N[We](e,0,s[Du]),rt=at=1,(W=s[ju])||(rt=at=0,s[ju]=W=$("button",N,`btn move ${d}`,"Move it!")),ft=this.toColumnId===null||void 0,ft===s[Cs]||(at|=2,s[Cs]=ft),rt||(W.type="submit"),at&2&&W.flag$(`btn move ${d} `+(s[Cs]?"disabled":"")),i=r=null,this.forTodayΦ&&(Qi=Vs=1,(i=s[Au])||(Qi=Vs=0,s[Au]=i=$("span",null,`di-au ${d}`,"or")),Qi||(i[Vt]=b),ze=Bs=1,(r=s[Vu])||(ze=Bs=0,s[Vu]=r=$("div",null,`action ${d}`,null)),ze||(r[Vt]=b),Zi=Ks=1,(Ji=r[Bu])||(Zi=Ks=0,r[Bu]=Ji=$("button",r,`btn done ${d}`,"Mark as done")),Ye=r[Ku]||(r[Ku]={flag:["hold",".action"],hold:[null],$_:[function(J,Lt,he){return t.done(J)},null]}),Ye.hold[0]=this.duration=1.3*1e3,Ye.$_[1]=t,Zi||Ji.on$("touch",Ye,this),ze||(Th=$("div",r,`bar ${d}`,null))),s[qu]=b[We](i,0,s[qu]),s[Wu]=b[We](r,0,s[Wu]),a||!u.setup||u.setup(c),u[xs](c),a||s[$u](u),Xe=qs=1,(Kt=s[Hu])||(Xe=qs=0,s[Hu]=(Kt=this.$openBtn,Kt[Vt]=s,Kt)),tr=s[Uu]||(s[Uu]={$_:[function(J,Lt,he){return t.open(J)},null]}),tr.$_[1]=t,Xe||Kt.on$("click",tr,this),Xe||s[$u](Kt),s[od](l),s}},re=ws;(()=>{id(ws,"CardOptions")})();Z("card-options-di-ay",re,{cssns:"di_af"});function ld(n,t){Object.defineProperty(n,"name",{value:t,configurable:!0})}dt();var Bt=Symbol.for("#dragging"),zu=Symbol.for("#__init__"),ud=Symbol.for("#__patch__"),ad=Symbol.for("#beforeReconcile"),Yu=Symbol.for("#placeChild"),Hi=Symbol.for("##up"),hd=Symbol.for("#afterVisit"),cd=Symbol.for("#afterReconcile"),Xu=Symbol();var Ts=Symbol();var Os=Symbol(),Gu=Symbol(),Qu=Symbol(),Ju=Symbol(),Zu=Symbol(),ta=Symbol(),ea=Symbol(),ia=Symbol(),ra=Symbol(),na=Symbol(),sa=Symbol(),oa=Symbol(),la=Symbol(),Ns=class extends K{[ud](t={},e=!0){var i;(i=t.data)!==void 0&&(this.data=i),(i=t.canMove)!==void 0&&(this.canMove=i),(i=t.isNegative)!==void 0&&(this.isNegative=i),(i=t.isFullColumn)!==void 0&&(this.isFullColumn=i),(i=t[Bt])!==void 0&&(this[Bt]=i)}[zu](t=null,e=!0,i=!0){var r;super[zu](...arguments),this.data=t?t.data:void 0,this.canMove=t?t.canMove:void 0,this.isNegative=t?t.isNegative:void 0,this.isFullColumn=t?t.isFullColumn:void 0,this[Bt]=t&&(r=t[Bt])!==void 0?r:!1}get pendingΦ(){return this.data.status==="pending"}hideOptions(){return this.lastElementChild.flags.add("hidden")}showOptions(){return this.lastElementChild.flags.remove("hidden")}rendered(){return this.showOptions()}dragStart(){return this.hideOptions(),m.draggingCardId=this.data.id,this[Bt]=!0}dragEnd(){return m.draggingCardId=null,m.hoveringCardId=null,m.dropIndex=null,this[Bt]=!1}dragOver(t){if(m.draggingCardId===this.data.id)return;let e=this.getBoundingClientRect(),i=(e.bottom-e.top)/2,r=t.clientY-e.top,s=m.draggingCard;if(!(s.columnId===this.data.columnId&&(s.index<this.data.index&&r<i||s.index>this.data.index&&r>i)))return m.hoveringCardId=this.data.id,m.dropIndex=r>i?this.data.index+1:this.data.index}render(){var t=this,e,i,r,s,o,l,u,a=this._ns_||"",c,h,d,S,f,p,g,C,T,v,_;if(r=this,r[ad](),s=o=1,r[Xu]===1||(s=o=0,r[Xu]=1),l=this.canMove&&this.pendingΦ||void 0,l===r[Ts]||(o|=2,r[Ts]=l),l=this[Bt]||void 0,l===r[Os]||(o|=2,r[Os]=l),l=this.canMove&&this.pendingΦ,l===r[Gu]||(r.draggable=r[Gu]=l),s||r.on$("dragstart",{$_:[function(O,b){return t.dragStart(O)}]},this),u=r[Qu]||(r[Qu]={if:[null],prevent:!0,$_:[function(O,b,N){return t.dragOver(O)},null]}),u.if[0]=!this.isFullColumn,u.$_[1]=t,s||r.on$("dragover",u,this),u=r[Ju]||(r[Ju]={prevent:!0,$_:[function(O,b,N){return t.dragEnd(O)},null]}),u.$_[1]=t,s||r.on$("dragend",u,this),(!s||o&2)&&r.flagSelf$("df-ah "+(r[Ts]?"df-ag":"")+" "+(r[Os]?"df-ai":"")),(c=r[Zu])||(r[Zu]=c=$("span",r,`content df_ah ${a}`,null)),h=this.data.title,h===r[ea]&&s||(r[ta]=c[Yu](r[ea]=h,384,r[ta])),e=null,m.draggingCardΦ&&(e="df-ak"),r.flags.toggle("df-ak",!!e),i=null,this.isNegative)d=S=1,(i=r[ia])||(d=S=0,r[ia]=i=$("span",null,`df-al hide-on-dragging df_ah ${a}`,"➜")),d||(i[Hi]=r);else switch(this.data.status){case"pending":{f=p=1,(i=r[ra])||(f=p=0,r[ra]=i=Y(re,null,`hide-on-dragging df_ah ${a}`,null)),f||(i[Hi]=r),g=this.data,g===i[na]||(i.card=i[na]=g),f||!i.setup||i.setup(p),i[hd](p);break}case"done":{C=T=1,(i=r[sa])||(C=T=0,r[sa]=i=$("span",null,`df-an hide-on-dragging df_ah ${a}`,"✓")),C||(i[Hi]=r);break}case"missed":{v=_=1,(i=r[oa])||(v=_=0,r[oa]=i=$("span",null,`df-ao hide-on-dragging df_ah ${a}`,"✗")),v||(i[Hi]=r);break}}return r[la]=r[Yu](i,0,r[la]),r[cd](o),r}},ne=Ns;(()=>{ld(Ns,"Card")})();Z("card-df-al",ne,{cssns:"df_af",cssid:"df-af"});function fd(n,t){Object.defineProperty(n,"name",{value:t,configurable:!0})}dt(),Qt(),Nt(),Si(),fi();var ua=Symbol.for("#__init__"),dd=Symbol.for("#__patch__"),md=Symbol.for("#beforeReconcile"),ks=Symbol.for("##up"),pd=Symbol.for("#getSlot"),aa=Symbol.for("#afterVisit"),Es=Symbol.for("#appendChild"),$d=Symbol.for("#placeChild"),gd=Symbol.for("#afterReconcile"),ha=Symbol(),ca=Symbol(),fa=Symbol(),da=Symbol(),ma=Symbol(),pa=Symbol(),$a=Symbol(),ga=Symbol(),_a=Symbol(),ya=Symbol();var Ps=Symbol(),ba=Symbol();var Is=Symbol(),va=Symbol(),Sa=Symbol(),Fs=class extends K{get $dialog(){let t=Y("dialog",null,`${this._ns_||""} $dialog`,null);return Object.defineProperty(this,"$dialog",{value:t}),t}get $input(){let t=$("textarea",null,`${this._ns_||""} $input`,null);return Object.defineProperty(this,"$input",{value:t}),t}get $openBtn(){let t=$("button",null,`open ${this._ns_||""} $openBtn`,null);return Object.defineProperty(this,"$openBtn",{value:t}),t}[dd](t={},e=!0){var i;(i=t.columnId)!==void 0&&(this.columnId=i),(i=t.content)!==void 0&&(this.content=i)}[ua](t=null,e=!0,i=!0){var r;super[ua](...arguments),this.columnId=t?t.columnId:void 0,this.content=t&&(r=t.content)!==void 0?r:""}get validΦ(){return this.content.trim().length>0&&this.content.trim().length<=180}open(){return this.$dialog.showModal(),this.$input.focus()}close(){return this.$dialog.close(),this.$openBtn.blur(),this.content=""}save(){if(this.validΦ)return m.addCard(this.content.trim(),this.columnId),this.close()}get placeholder(){return"Learn something new, do a daily task, try a sport, discover a new hobby or anything else..."}render(){var t=this,e,i,r,s,o,l,u,a,c=this._ns_||"",h,d,S,f,p,g,C,T,v,_,O,b,N,M,R,A,x,V,F,D,y,q,U,P,z;return i=this,i[md](),r=s=1,i[ha]===1||(r=s=0,i[ha]=1),(!r||s&2)&&i.flagSelf$("dg-ag"),l=u=1,(o=i[ca])||(l=u=0,i[ca]=(o=this.$dialog,o[ks]=i,o)),a=o[pd]("__",i),l||o.on$("keydown",{esc:!0,prevent:!0,$_:[function(L,I){return t.close(L)}]},this),l||(h=$("div",a,`container ${c}`,null)),l||(d=$("div",h,`row ${c}`,null)),l||(S=$("h3",d,`${c}`,"I am going to...")),p=g=1,(f=i[fa])||(p=g=0,i[fa]=f=$("button",d,`close ${c}`,"✖")),C=i[da]||(i[da]={$_:[function(L,I,j){return t.close(L)},null]}),C.$_[1]=t,p||f.on$("click",C,this),v=_=1,(T=i[ma])||(v=_=0,i[ma]=T=$("form",h,`container ${c}`,null)),O=i[pa]||(i[pa]={prevent:!0,$_:[function(L,I,j){return t.save(L)},null]}),O.$_[1]=t,v||T.on$("submit",O,this),N=M=1,(b=i[$a])||(N=M=0,i[$a]=(b=this.$input,b[ks]=T,b)),N||(b.name="title"),R=this.placeholder,R===i[ga]||(b.placeholder=i[ga]=R),N||(b.rows=5),R=i[_a]||(i[_a]=b.bind$("data",[this,"content"])),N||!b.setup||b.setup(M),b[aa](M),N||T[Es](b),v||(A=$("span",T,`dg-ao ${c}`,"* Describe it in up to 180 characters")),V=F=1,(x=i[ya])||(V=F=0,i[ya]=x=$("button",T,`save ${c}`,"That's it!")),D=!this.validΦ||void 0,D===i[Ps]||(F|=2,i[Ps]=D),V||(x.type="submit"),F&2&&x.flag$(`save ${c} `+(i[Ps]?"disabled":"")),l||!o.setup||o.setup(u),o[aa](u),l||i[Es](o),q=U=1,(y=i[ba])||(q=U=0,i[ba]=(y=this.$openBtn,y[ks]=i,y)),P=this.$dialog.open||void 0,P===i[Is]||(U|=2,i[Is]=P),z=i[va]||(i[va]={$_:[function(L,I,j){return t.open(L)},null]}),z.$_[1]=t,q||y.on$("click",z,this),U&2&&y.flag$(`open ${this._ns_||""} $openBtn `+(i[Is]?"dg-aq":"")),e=null,this.$dialog.open?e="Thinking...":e="I am going to...",i[Sa]=y[$d](e,0,i[Sa]),q||i[Es](y),i[gd](s),i}},se=Fs;(()=>{fd(Fs,"CardAdder")})();Z("card-adder-dg-aq",se,{cssns:"dg_af"});function xa(n){let t;return n&&((t=n.toIterable)?t.call(n):n)}function _d(n,t){Object.defineProperty(n,"name",{value:t,configurable:!0})}dt(),ul(),yl();var lt=Symbol.for("#hovering"),Ca=Symbol.for("#__init__"),yd=Symbol.for("#__patch__"),bd=Symbol.for("#beforeReconcile"),He=Symbol.for("#placeChild"),Ui=Symbol.for("#afterVisit"),vd=Symbol.for("#appendChild"),Sd=Symbol.for("#getRenderContext"),oe=Symbol.for("##up"),xd=Symbol.for("#afterReconcile"),wa=Symbol(),Ta=Symbol(),Oa=Symbol(),Na=Symbol(),ka=Symbol(),Ea=Symbol(),Pa=Symbol(),Ia=Symbol(),Fa=Symbol(),La=Symbol(),Ma=Symbol(),Ra=Symbol();var Cd=Symbol(),Da=Symbol(),ja=Symbol(),Aa=Symbol(),Va=Symbol(),Ba=Symbol(),Ka=Symbol(),qa=Symbol(),Wa=Symbol();var Ls=Symbol(),Ha=Symbol(),Ua=Symbol(),za=Symbol(),Ya=Symbol(),Xa=Symbol(),Ms=class extends K{[yd](t={},e=!0){var i;(i=t.data)!==void 0&&(this.data=i),(i=t[lt])!==void 0&&(this[lt]=i)}[Ca](t=null,e=!0,i=!0){var r;super[Ca](...arguments),this.data=t?t.data:void 0,this[lt]=t&&(r=t[lt])!==void 0?r:!1}get fullΦ(){var t;return((t=m.draggingCard)==null?void 0:t.columnId)===this.data.id&&this[lt]?!1:m.isFullColumn(this.data.id)}get cards(){return m.getColumnCards(this.data.id)}get status(){return m.getColumnSummary(this.data.id)}get length(){return m.getColumnLength(this.data.id)}get activeΦ(){return this.data.status!=="closed"}get emptyΦ(){return this.cards.length===0}get draggingCardHeight(){let t=globalThis.document.getElementById(m.draggingCardId);return t?t.getBoundingClientRect().height:35}get color(){if(this.data.status==="current")return"indigo1";if(this.data.status==="open")return this.data.color;switch(this.status){case"completed":return"emerald1";case"almost":return"orange1";case"far":return"orange1";case"none":return"rose1";case"empty":return"cool2"}}get closedMessage(){if(this.status==="completed"&&this.length===this.data.limit)return"Amazing  🤩";switch(this.status){case"completed":return"Great  😊";case"almost":return"Almost  😅";case"far":return"Okay  😐";case"none":return"My bad  ☹️";case"empty":return"Oh no  🫣"}}get lengthViewer(){return this.data.toFill?"★".repeat(this.length)+"☆".repeat(this.data.limit-this.length):"★".repeat(this.data.limit-this.length)+"☆".repeat(this.length)}isHoveringBefore(t){return this[lt]&&!this.fullΦ&&t.id===m.hoveringCardId&&m.dropIndex===t.index}isHoveringAfter(t){return this[lt]&&!this.fullΦ&&t.id===m.hoveringCardId&&m.dropIndex>t.index}dragEnter(){this[lt]=!0;let t=m.hoveringCard;if((t==null?void 0:t.columnId)!==this.data.id)return m.hoveringCardId=null,m.dropIndex=null}drop(){if(!m.hoveringCardΦ&&this.cards.length!==0)return;!m.hoveringCardΦ&&this.cards.length===0&&(m.dropIndex=1);let t=m.draggingCard,e=m.hoveringCard,i=t.columnId!==(e==null?void 0:e.columnId);for(let r=0,s=xa(m.content.cards),o=s.length;r<o;r++){let l=s[r],u=l.columnId===t.columnId,a=l.index>t.index,c=l.columnId===this.data.id,h=l.index>=m.dropIndex;c&&h?m.downCard(l):u&&a&&i&&m.upCard(l)}return m.moveCard(t,this.data.id),this[lt]=!1}render(){var t=this,e,i,r,s,o,l,u,a=this._ns_||"",c,h,d,S,f,p,g,C,T,v,_,O,b,N,M,R,A,x,V,F,D,y,q,U,P,z,L,I,j,ut,Ft,X;r=this,r[bd](),s=o=1,r[wa]===1||(s=o=0,r[wa]=1),l=this.color,l===r[Ta]||r.css$var("--cy_ah",r[Ta]=l,null,"--color"),s||r.on$("dragenter",{prevent:!0,$_:[function(W,rt){return t.dragEnter(W)}]},this),u=r[Oa]||(r[Oa]={if:[null],prevent:!0}),u.if[0]=!this.fullΦ&&this.activeΦ,s||r.on$("dragover",u,this),u=r[Na]||(r[Na]={prevent:!0,$_:[function(W,rt,at){return t.drop(W)},null]}),u.$_[1]=t,s||r.on$("drop",u,this),s||r.on$("dragend",{$_:[function(W,rt){return t[lt]=!1}]},this),(!s||o&2)&&r.flagSelf$("cy-ag"),l=this.draggingCardHeight,l===r[ka]||r.css$var("--cy_ai",r[ka]=l,"px","h"),(c=r[Ea])||(r[Ea]=c=$("h2",r,`cy_ag ${a}`,null)),h=this.data.title,h===r[Ia]&&s||(r[Pa]=c[He](r[Ia]=h,384,r[Pa])),(d=r[Fa])||(r[Fa]=d=$("span",r,`cy-ak cy_ag ${a}`,null)),S=this.lengthViewer,S===r[Ma]&&s||(r[La]=d[He](r[Ma]=S,384,r[La])),p=g=1,(f=r[Ra])||(p=g=0,r[Ra]=f=Y("i-global",r,`cy_ag ${a}`,null)),p||f.on$("dragenter",{outside:!0,$_:[function(W,rt){return t[lt]=!1}]},this),p||!f.setup||f.setup(g),f[Ui](g),p||r[vd](f),e=null,this.activeΦ&&this.emptyΦ&&this[lt]&&(T=r[Sd](Cd),C=v=1,(e=T.run("drop-area-empty"))||(C=v=0,T.cache(e=$("div",null,`drop-area cy_ag ${a}`,null))),C||(e[oe]=r)),r[Da]=r[He](e,0,r[Da]),(_=r[ja])||(r[ja]=_=gi(1024,r)),O=0,b=_.$;for(let W=0,rt=xa(this.cards),at=rt.length;W<at;W++){let ft=rt[W];this.isHoveringBefore(ft)&&(M=A=1,(N=b.get(R="drop-area-before"))||(M=A=0,b.set(R,N=$("div",null,`drop-area cy_ag ${a}`,null))),M||(N[oe]=_),_.push(N,O++,R)),V=D=1,(x=b.get(F=ft.id))||(V=D=0,b.set(F,x=Y(ne,null,`cy_ag ${a}`,null))),V||(x[oe]=_),y=ft.id,y===x[Aa]||(x.id=x[Aa]=y),ft===x[Va]||(x.data=x[Va]=ft),y=this.data.canMoveOut&&this.activeΦ,y===x[Ba]||(x.canMove=x[Ba]=y),y=!this.data.toFill,y===x[Ka]||(x.isNegative=x[Ka]=y),y=this.fullΦ,y===x[qa]||(x.isFullColumn=x[qa]=y),V||!x.setup||x.setup(D),x[Ui](D),_.push(x,O++,F),this.isHoveringAfter(ft)&&(U=z=1,(q=b.get(P="drop-area-after"))||(U=z=0,b.set(P,q=$("div",null,`drop-area cy_ag ${a}`,null))),U||(q[oe]=_),_.push(q,O++,P))}return _[Ui](O),i=null,this.activeΦ?(L=I=1,(i=r[Wa])||(L=I=0,r[Wa]=i=Y(se,null,`cy_ag ${a}`,null)),L||(i[oe]=r),j=!this.data.canAdd||this.fullΦ||m.draggingCardΦ||void 0,j===i[Ls]||(I|=2,i[Ls]=j),j=this.data.id,j===i[Ha]||(i.columnId=i[Ha]=j),I&2&&i.flag$(`cy_ag ${a} `+(i[Ls]?"cy-aq":"")),L||!i.setup||i.setup(I),i[Ui](I)):(ut=Ft=1,(i=r[Ua])||(ut=Ft=0,r[Ua]=i=$("span",null,`cy-as cy_ag ${a}`,null)),ut||(i[oe]=r),X=this.closedMessage,X===i[Ya]&&ut||(i[za]=i[He](i[Ya]=X,384,i[za]))),r[Xa]=r[He](i,0,r[Xa]),r[xd](o),r}},le=Ms;(()=>{_d(Ms,"Column")})();Z("column-cy-ap",le,{cssns:"cy_af",cssid:"cy-af"});function Rs(n){let t;return n&&((t=n.toIterable)?t.call(n):n)}function wd(n,t){Object.defineProperty(n,"name",{value:t,configurable:!0})}dt(),Nt();var Td=Symbol.for("#beforeReconcile"),zi=Symbol.for("#placeChild"),Ga=Symbol.for("##up"),Qa=Symbol.for("#afterVisit"),Od=Symbol.for("#afterReconcile"),Ja=Symbol(),Za=Symbol(),th=Symbol(),eh=Symbol(),ih=Symbol(),rh=Symbol(),nh=Symbol(),sh=Symbol(),oh=Symbol(),lh=Symbol(),uh=Symbol(),ah=Symbol(),hh=Symbol(),ch=Symbol(),fh=Symbol(),dh=Symbol(),Ds=class extends K{get cardsToFinishByColum(){let t={};for(let e=0,i=Rs(m.cardsToFinish),r=i.length;e<r;e++){let s=i[e],o=m.getColumnData(s.columnId),l=""+o.title+" ("+o.week+")";t[l]=[...t[l]||[],s]}return t}get daysToFinish(){return Object.keys(this.cardsToFinishByColum)}render(){var t,e,i,r,s=this._ns_||"",o,l,u,a,c,h,d,S,f,p,g,C,T,v,_,O,b,N,M,R,A,x,V,F,D,y,q,U;e=this,e[Td](),i=r=1,e[Ja]===1||(i=r=0,e[Ja]=1),(o=e[Za])||(e[Za]=o=$("h2",e,`cx-ah ${s}`,null)),i||o[zi]("Let's review the previous day"),t=null,this.daysToFinish.length>1?t="s":t="",e[th]=o[zi](t,0,e[th]),(l=e[eh])||(e[eh]=l=$("div",e,`columns ${s}`,null)),(u=e[ih])||(e[ih]=u=Se(384,l)),a=0,c=u.$;for(let P=0,z=Rs(this.daysToFinish),L=z.length;P<L;P++){let I=z[P];d=S=1,(h=c[a])||(d=S=0,c[a]=h=$("div",u,`column ${s}`,null)),d||(h[Ga]=u),(f=h[rh])||(h[rh]=f=$("h3",h,`column-title ${s}`,null)),p=I,p===h[sh]&&d||(h[nh]=f[zi](h[sh]=p,384,h[nh])),(g=h[oh])||(h[oh]=g=Se(256,h)),C=0,T=g.$;for(let j=0,ut=Rs(this.cardsToFinishByColum[I]),Ft=ut.length;j<Ft;j++){let X=ut[j];_=O=1,(v=T[C])||(_=O=0,T[C]=v=$("div",g,`cx-al ${s}`,null)),_||(v[Ga]=g),_||(b=$("div",v,`cx-am card ${s}`,null)),(N=v[lh])||(v[lh]=N=$("span",b,`content ${s}`,null)),M=X.title,M===v[ah]&&_||(v[uh]=N[zi](v[ah]=M,384,v[uh])),_||(R=$("div",v,`cx-ao ${s}`,null)),x=V=1,(A=v[hh])||(x=V=0,v[hh]=A=$("button",R,`done ${s}`,"Done")),F=v[ch]||(v[ch]={$_:[function(W,rt,at){return m.finishCard(at,!0)},null]}),F.$_[1]=X,x||A.on$("click",F,this),y=q=1,(D=v[fh])||(y=q=0,v[fh]=D=$("button",R,`missed ${s}`,"Missed")),U=v[dh]||(v[dh]={$_:[function(W,rt,at){return m.finishCard(at,!1)},null]}),U.$_[1]=X,y||D.on$("click",U,this),C++}g[Qa](C),a++}return u[Qa](a),e[Od](r),e}},ue=Ds;(()=>{wd(Ds,"Checker")})();Z("checker-cx-aq",ue,{cssns:"cx_af",cssid:"cx-af"});function Nd(n){let t;return n&&((t=n.toIterable)?t.call(n):n)}function xh(n,t){Object.defineProperty(n,"name",{value:t,configurable:!0})}hu();var ae=Symbol.for("#today"),mh=Symbol.for("#__init__"),kd=Symbol.for("#__patch__"),Ch=Symbol.for("#beforeReconcile"),Yi=Symbol.for("##up"),Ue=Symbol.for("#afterVisit"),Ed=Symbol.for("#getRenderContext"),Pd=Symbol.for("#placeChild"),wh=Symbol.for("#afterReconcile"),Id=Symbol.for("#appendChild"),ph=Symbol(),$h=Symbol(),gh=Symbol(),Fd=Symbol(),_h=Symbol(),yh=Symbol(),bh=Symbol(),vh=Symbol(),Sh=Symbol(),js=class extends K{[kd](t={},e=!0){var i;(i=t[ae])!==void 0&&(this[ae]=i)}[mh](t=null,e=!0,i=!0){var r;super[mh](...arguments),this[ae]=t&&(r=t[ae])!==void 0?r:new Date().toLocaleDateString()}build(){var t=this;return setInterval(function(){let e=new Date().toLocaleDateString();if(e!==t[ae])return t[ae]=e,t.setup()},1*60*1e3)}setup(){return m.checkHistory()}render(){var t,e,i,r,s,o,l,u,a,c,h,d;if(e=this,e[Ch](),i=r=1,e[ph]===1||(i=r=0,e[ph]=1),t=null,m.cardsToFinish.length>0)s=o=1,(t=e[$h])||(s=o=0,e[$h]=t=Y(ue,null,null,null)),s||(t[Yi]=e),s||!t.setup||t.setup(o),t[Ue](o);else{(t=e[gh])||(e[gh]=t=gi(1024,null)),t[Yi]=e,l=0,u=t.$;for(let S=0,f=Nd(m.content.columns),p=f.length;S<p;S++){let g=f[S];g.week===m.content.activeWeek&&(c=d=1,(a=(h=u[Ed](Fd)).get(l))||(c=d=0,h.set(l,a=Y(le,t,null,null))),c||(a[Yi]=t),g===a[_h]||(a.data=a[_h]=g),c||!a.setup||a.setup(d),a[Ue](d),t.push(a,l++,h))}t[Ue](l)}return e[yh]=e[Pd](t,0,e[yh]),e[wh](r),e}},Xi=js;(()=>{xh(js,"App")})();Z("app-cv-ai",Xi,{cssid:"cv-af"});var As=class extends K{async routed(){return await m.init()}render(){var t,e,i,r,s,o;return t=this,t[Ch](),e=i=1,t[bh]===1||(e=i=0,t[bh]=1),s=o=1,(r=t[vh])||(s=o=0,t[vh]=r=Y(Xi,t,null,null)),s||!r.setup||r.setup(o),r[Ue](o),s||t[Id](r),t[wh](i),t}},Gi=As;(()=>{xh(As,"Loader")})();Z("loader-cv-al",Gi,{});en(function(){var n,t=ao(),e,i;return e=i=1,(n=t[Sh])||(e=i=0,n=t[Sh]=n=Y(Gi,null,null,null)),e||(n[Yi]=t._),e||(n.route="/"),e||t.sym||!n.setup||n.setup(i),t.sym||n[Ue](i),n});
//__FOOT__
